

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>&lt;no title&gt; &mdash; skyportal 0.9.dev0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/output_cells.css" type="text/css" />
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="&lt;no title&gt;" href="usage.html" />
    <link rel="prev" title="&lt;no title&gt;" href="about.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> skyportal
          

          
          </a>

          
            
            
              <div class="version">
                0.9.dev0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="adding_features.html">};</a></li>
<li class="toctree-l1"><a class="reference internal" href="adding_features.html#id6">}</a></li>
<li class="toctree-l1"><a class="reference internal" href="adding_features.html#id9">};</a></li>
<li class="toctree-l1"><a class="reference internal" href="adding_features.html#id24">};</a></li>
<li class="toctree-l1"><a class="reference internal" href="adding_features.html#id27">};</a></li>
<li class="toctree-l1"><a class="reference internal" href="adding_features.html#id30">};</a></li>
<li class="toctree-l1"><a class="reference internal" href="adding_features.html#id51">}</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">skyportal</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>&lt;no title&gt;</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <p># Setup</p>
<p>## Dependencies</p>
<p>SkyPortal requires the following software to be installed.  We show
how to install them on MacOS and Debian-based systems below.</p>
<ul class="simple">
<li><p>Python 3.6 or later</p></li>
<li><p>Supervisor (v&gt;=3.0b2)</p></li>
<li><p>NGINX (v&gt;=1.7)</p></li>
<li><p>PostgreSQL (v&gt;=9.6)</p></li>
<li><p>Node.JS/npm (v&gt;=5.8.0)</p></li>
</ul>
<p>## Source download, Python environment</p>
<p>Clone the [SkyPortal repository](<a class="reference external" href="https://github.com/skyportal/skyportal">https://github.com/skyportal/skyportal</a>) and start a new
virtual environment.</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">git</span> <span class="pre">clone</span> <span class="pre">https://github.com/skyportal/skyportal.git</span>
<span class="pre">cd</span> <span class="pre">skyportal/</span>
<span class="pre">virtualenv</span> <span class="pre">skyportal_env</span>
<span class="pre">source</span> <span class="pre">skyportal_env/bin/activate</span>
<span class="pre">`</span></code></p>
<p>(You can also use <cite>conda</cite> or <cite>pipenv</cite> to create your environment.)</p>
<p>## Installation: MacOS</p>
<p>These instructions assume that you have [Homebrew](<a class="reference external" href="http://brew.sh/">http://brew.sh/</a>) installed.</p>
<ol class="arabic simple">
<li><p>Install dependencies</p></li>
</ol>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">brew</span> <span class="pre">install</span> <span class="pre">supervisor</span> <span class="pre">nginx</span> <span class="pre">postgresql</span> <span class="pre">node</span>
<span class="pre">`</span></code></p>
<ol class="arabic simple" start="2">
<li><p>Start the PostgreSQL server:</p></li>
</ol>
<blockquote>
<div><ul class="simple">
<li><p>To start automatically at login: <cite>brew services start postgresql</cite></p></li>
<li><p>To start manually: <cite>pg_ctl -D /usr/local/var/postgres start</cite></p></li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>To run the test suite, you’ll need Geckodriver:</p></li>
</ol>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">brew</span> <span class="pre">install</span> <span class="pre">geckodriver</span>
<span class="pre">`</span></code></p>
<p>## Installation: Debian-based Linux</p>
<ol class="arabic simple">
<li><p>Install dependencies</p></li>
</ol>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">sudo</span> <span class="pre">apt</span> <span class="pre">install</span> <span class="pre">nginx</span> <span class="pre">supervisor</span> <span class="pre">postgresql</span> <span class="pre">libpq-dev</span> <span class="pre">nodejs</span>
<span class="pre">`</span></code></p>
<ol class="arabic simple" start="2">
<li><p>Configure your database permissions.</p></li>
</ol>
<p>In <cite>pg_hba.conf</cite> (typically located in
<cite>/etc/postgresql/&lt;postgres-version&gt;/main</cite>), insert the following lines
<em>before</em> any other <cite>host</cite> lines:</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">host</span> <span class="pre">skyportal</span> <span class="pre">skyportal</span> <span class="pre">127.0.0.1/32</span> <span class="pre">trust</span>
<span class="pre">host</span> <span class="pre">skyportal_test</span> <span class="pre">skyportal</span> <span class="pre">127.0.0.1/32</span> <span class="pre">trust</span>
<span class="pre">`</span></code></p>
<p>In some PostgreSQL installations, the default TCP port may be different from the 5432 value assumed in our default configuration file values. To remedy this, you can either edit your config.yaml file to reflect your system’s PostgreSQL default port, or update your system-wide config to use port 5432 by editing /etc/postgresql/12/main/postgresql.conf (replace “12” with your installed version number) and changing the line <cite>port = XXXX</cite> (where “XXXX” is whatever the system default was) to <cite>port = 5432</cite>.</p>
<p>Restart PostgreSQL:</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">sudo</span> <span class="pre">service</span> <span class="pre">postgresql</span> <span class="pre">restart</span>
<span class="pre">`</span></code></p>
<ol class="arabic simple" start="3">
<li><p>To run the test suite, you’ll need Geckodriver:</p></li>
</ol>
<ul class="simple">
<li><p>Download the latest version from <a class="reference external" href="https://github.com/mozilla/geckodriver/releases/">https://github.com/mozilla/geckodriver/releases/</a></p></li>
<li><p>Extract the binary to somewhere on your path</p></li>
<li><p>Ensure it runs with <cite>geckodriver –version</cite></p></li>
</ul>
<p>## Launch</p>
<ol class="arabic simple">
<li><p>Initialize the database with <cite>make db_init</cite> (this only needs to
happen once).</p></li>
</ol>
<p>2. Copy <cite>config.yaml.defaults</cite> to <cite>config.yaml</cite>.
2. If you want some test data to play with, run <cite>make load_demo_data</cite>.
3. Run <cite>make log</cite> to monitor the service and, in a separate window, <cite>make run</cite> to start the server.</p>
<p>Direct your browser to <a class="reference external" href="http://localhost:5000">http://localhost:5000</a>.</p>
<p>## Additional Configuration</p>
<p>The configuration file lives in <cite>config.yaml</cite>, and is meant to be
self-documenting.  Please modify as you see fit.</p>
<p><strong>Before deploying this on a public server</strong> change <cite>app:secret-key</cite>
to a unique value.</p>
<p>If you want to use a different configuration file, you may launch any
of the SkyPortal commands with the FLAGS environment variable set:</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">FLAGS=&quot;--config=myconfig.yaml&quot;</span> <span class="pre">make</span> <span class="pre">run</span>
<span class="pre">`</span></code></p>
<p>### Authentication</p>
<p>By default, the server allows anyone to log in (even if it presents a
login screen).  If you are running a public-facing instance of
SkyPortal, you should enable multi-user login by adding Google
credentials to the <cite>server:auth</cite> section of the configuration file.</p>
<p>### Creating an administrative user</p>
<p>By default, no user has permission to perform system administration.
You can add a user with such permissions by running the following from
Python:</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">from</span> <span class="pre">skyportal.model_util</span> <span class="pre">import</span> <span class="pre">add_super_user</span>
<span class="pre">add_super_user('testuser&#64;cesium-ml.org')</span>
<span class="pre">`</span></code></p>
<p>### Test data</p>
<p>By default, SkyPortal contains no data.  You can ingest some sample light curves by running</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">make</span> <span class="pre">load_demo_data</span>
<span class="pre">`</span></code></p>
<p>This also adds <cite>testuser&#64;cesium-ml.org</cite> as an administrator.</p>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="usage.html" class="btn btn-neutral float-right" title="&lt;no title&gt;" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="about.html" class="btn btn-neutral float-left" title="&lt;no title&gt;" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, The skyportal Team

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>