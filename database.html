<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Database Schema &mdash; skyportal 0.9.dev0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/output_cells.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Database migrations" href="migrations.html" />
    <link rel="prev" title="Styling components" href="styling.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> skyportal
          </a>
              <div class="version">
                0.9.dev0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="design.html">System Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup.html">Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev.html">Developer notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="deploy.html">Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_loader.html">Data loader</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">How to Contribute</a></li>
<li class="toctree-l1"><a class="reference internal" href="adding_features.html">Adding new features</a></li>
<li class="toctree-l1"><a class="reference internal" href="styling.html">Styling components</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Database Schema</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#sqlalchemy-model-api-documentation">SQLAlchemy Model API Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#entity-relationship-diagram">Entity Relationship Diagram</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="migrations.html">Database migrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="query_analysis.html">Analyzing database queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="permissions.html">Access controls</a></li>
<li class="toctree-l1"><a class="reference internal" href="slack.html">Slack Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="followup.html">Follow-up triggering</a></li>
<li class="toctree-l1"><a class="reference internal" href="mma.html">MMA Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_usage.html">Advanced usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="analysis.html">Analysis</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">skyportal</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Database Schema</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="database-schema">
<h1>Database Schema<a class="headerlink" href="#database-schema" title="Permalink to this heading"></a></h1>
<p>SkyPortal uses a PostgreSQL database to manage persistent state. This section
documents the schema of the database and describes how the application
interacts with it.</p>
<section id="sqlalchemy-model-api-documentation">
<h2>SQLAlchemy Model API Documentation<a class="headerlink" href="#sqlalchemy-model-api-documentation" title="Permalink to this heading"></a></h2>
<p>The SkyPortal Python backend interacts with the PostgreSQL backend using the
<a class="reference external" href="http://sqlalchemy.org">SQLAlchemy</a>
<a class="reference external" href="https://docs.sqlalchemy.org/en/13/orm/tutorial.html">object relational mapper</a>.
Each database table is represented by a Python class, and each table Column
is represented by a class attribute. This Section documents each of the
SkyPortal and baselayer classes that are mapped to database tables.</p>
<span class="target" id="module-skyportal.models"></span><span class="target" id="module-baselayer.app.models"></span><dl class="py class">
<dt class="sig sig-object py" id="baselayer.app.models.ACL">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">baselayer.app.models.</span></span><span class="sig-name descname"><span class="pre">ACL</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#baselayer.app.models.ACL" title="Permalink to this definition"></a></dt>
<dd><p>An access control list item representing a privilege within the
application. ACLs are aggregated into collections called Roles which
are assumed by Users. Examples of ACLs include <cite>Upload Data</cite>, <cite>Comment</cite>,
and <cite>Manage Groups</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Attributes</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>created_at</strong></dt><dd><p>UTC time of insertion of object’s row into the database.</p>
</dd>
<dt><strong>id</strong></dt><dd><p>ACL name.</p>
</dd>
<dt><strong>modified</strong></dt><dd><p>UTC time the object’s row was last modified in the database.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Methods</p>
<table class="autosummary longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">create_or_get</span></code>(id)</p></td>
<td><p>Return a new <cite>cls</cite> if an instance with the specified primary key does not exist, else return the existing instance.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get</span></code>(id_or_list, user_or_token[, mode, ...])</p></td>
<td><p>Return a database record if it is accessible to the specified User or Token.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_all</span></code>(user_or_token[, mode, options, columns])</p></td>
<td><p>Retrieve all database records accessible by the specified User or token.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_if_accessible_by</span></code>(cls_id, user_or_token)</p></td>
<td><p>Return a database record if it is accessible to the specified User or Token.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_if_readable_by</span></code>(ident, user_or_token[, ...])</p></td>
<td><p>Return an object from the database if the requesting User or Token has access to read the object.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_records_accessible_by</span></code>(user_or_token[, ...])</p></td>
<td><p>Retrieve all database records accessible by the specified User or token.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">is_accessible_by</span></code>(user_or_token[, mode])</p></td>
<td><p>Check if a User or Token has a specified type of access to this database record.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">is_readable_by</span></code>(user_or_token)</p></td>
<td><p>Return a boolean indicating whether a User or Token has read access to this object.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">query_records_accessible_by</span></code>(user_or_token[, ...])</p></td>
<td><p>Return the query for all database records accessible by the specified User or token.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">select</span></code>(user_or_token[, mode, options, columns])</p></td>
<td><p>Return the select statement for all database records accessible by the specified User or token.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_dict</span></code>()</p></td>
<td><p>Serialize this object to a Python dictionary.</p></td>
</tr>
</tbody>
</table>
<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.ACL.created_at">
<span class="sig-name descname"><span class="pre">created_at</span></span><a class="headerlink" href="#baselayer.app.models.ACL.created_at" title="Permalink to this definition"></a></dt>
<dd><p>UTC time of insertion of object’s row into the database.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.ACL.id">
<span class="sig-name descname"><span class="pre">id</span></span><a class="headerlink" href="#baselayer.app.models.ACL.id" title="Permalink to this definition"></a></dt>
<dd><p>ACL name.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.ACL.modified">
<span class="sig-name descname"><span class="pre">modified</span></span><a class="headerlink" href="#baselayer.app.models.ACL.modified" title="Permalink to this definition"></a></dt>
<dd><p>UTC time the object’s row was last modified in the database.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="baselayer.app.models.AccessibleIfRelatedRowsAreAccessible">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">baselayer.app.models.</span></span><span class="sig-name descname"><span class="pre">AccessibleIfRelatedRowsAreAccessible</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">properties_and_modes</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#baselayer.app.models.AccessibleIfRelatedRowsAreAccessible" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Attributes</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>properties_and_modes</strong></dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">Methods</p>
<table class="autosummary longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">check_cls_for_attributes</span></code>(cls, attrs)</p></td>
<td><p>Check that a target class has the specified attributes.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#baselayer.app.models.AccessibleIfRelatedRowsAreAccessible.query_accessible_rows" title="baselayer.app.models.AccessibleIfRelatedRowsAreAccessible.query_accessible_rows"><code class="xref py py-obj docutils literal notranslate"><span class="pre">query_accessible_rows</span></code></a>(cls, user_or_token[, ...])</p></td>
<td><p>Construct a Query object that, when executed, returns the rows of a specified table that are accessible to a specified user or token.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#baselayer.app.models.AccessibleIfRelatedRowsAreAccessible.select_accessible_rows" title="baselayer.app.models.AccessibleIfRelatedRowsAreAccessible.select_accessible_rows"><code class="xref py py-obj docutils literal notranslate"><span class="pre">select_accessible_rows</span></code></a>(cls, user_or_token[, ...])</p></td>
<td><p>Construct a Select object that, when executed, returns the rows of a specified table that are accessible to a specified user or token.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">user_id_from_user_or_token</span></code>(user_or_token)</p></td>
<td><p>Return the user_id associated with a specified User or Token object.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt class="sig sig-object py" id="baselayer.app.models.AccessibleIfRelatedRowsAreAccessible.query_accessible_rows">
<span class="sig-name descname"><span class="pre">query_accessible_rows</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cls</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_or_token</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#baselayer.app.models.AccessibleIfRelatedRowsAreAccessible.query_accessible_rows" title="Permalink to this definition"></a></dt>
<dd><p>Construct a Query object that, when executed, returns the rows of a
specified table that are accessible to a specified user or token.
All query based functions will be deprecated when moving to
SQL Alchemy 2.0 in favor of select functions.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>cls</strong><span class="classifier"><cite>baselayer.app.models.DeclarativeMeta</cite></span></dt><dd><p>The mapped class of the target table.</p>
</dd>
<dt><strong>user_or_token</strong><span class="classifier"><cite>baselayer.app.models.User</cite> or <cite>baselayer.app.models.Token</cite></span></dt><dd><p>The User or Token to check.</p>
</dd>
<dt><strong>columns</strong><span class="classifier">list of sqlalchemy.Column, optional, default None</span></dt><dd><p>The columns to retrieve from the target table. If None, queries
the mapped class directly and returns mapped instances.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>query</strong><span class="classifier">sqlalchemy.Query</span></dt><dd><p>Query for the accessible rows.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="baselayer.app.models.AccessibleIfRelatedRowsAreAccessible.select_accessible_rows">
<span class="sig-name descname"><span class="pre">select_accessible_rows</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cls</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_or_token</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#baselayer.app.models.AccessibleIfRelatedRowsAreAccessible.select_accessible_rows" title="Permalink to this definition"></a></dt>
<dd><p>Construct a Select object that, when executed, returns the rows of a
specified table that are accessible to a specified user or token.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>cls</strong><span class="classifier"><cite>baselayer.app.models.DeclarativeMeta</cite></span></dt><dd><p>The mapped class of the target table.</p>
</dd>
<dt><strong>user_or_token</strong><span class="classifier"><cite>baselayer.app.models.User</cite> or <cite>baselayer.app.models.Token</cite></span></dt><dd><p>The User or Token to check.</p>
</dd>
<dt><strong>columns</strong><span class="classifier">list of sqlalchemy.Column, optional, default None</span></dt><dd><p>The columns to retrieve from the target table. If None, queries
the mapped class directly and returns mapped instances.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>sqlalchemy select object</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="baselayer.app.models.AccessibleIfUserMatches">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">baselayer.app.models.</span></span><span class="sig-name descname"><span class="pre">AccessibleIfUserMatches</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">relationship_chain</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#baselayer.app.models.AccessibleIfUserMatches" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Attributes</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>relationship_chain</strong></dt><dd></dd>
<dt><a class="reference internal" href="#baselayer.app.models.AccessibleIfUserMatches.relationship_names" title="baselayer.app.models.AccessibleIfUserMatches.relationship_names"><code class="xref py py-obj docutils literal notranslate"><span class="pre">relationship_names</span></code></a></dt><dd><p>List of names of each relationship in the chain.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Methods</p>
<table class="autosummary longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">check_cls_for_attributes</span></code>(cls, attrs)</p></td>
<td><p>Check that a target class has the specified attributes.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#baselayer.app.models.AccessibleIfUserMatches.query_accessible_rows" title="baselayer.app.models.AccessibleIfUserMatches.query_accessible_rows"><code class="xref py py-obj docutils literal notranslate"><span class="pre">query_accessible_rows</span></code></a>(cls, user_or_token[, ...])</p></td>
<td><p>Construct a Query object that, when executed, returns the rows of a specified table that are accessible to a specified user or token.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#baselayer.app.models.AccessibleIfUserMatches.select_accessible_rows" title="baselayer.app.models.AccessibleIfUserMatches.select_accessible_rows"><code class="xref py py-obj docutils literal notranslate"><span class="pre">select_accessible_rows</span></code></a>(cls, user_or_token[, ...])</p></td>
<td><p>Construct a Select object that, when executed, returns the rows of a specified table that are accessible to a specified user or token.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">user_id_from_user_or_token</span></code>(user_or_token)</p></td>
<td><p>Return the user_id associated with a specified User or Token object.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt class="sig sig-object py" id="baselayer.app.models.AccessibleIfUserMatches.query_accessible_rows">
<span class="sig-name descname"><span class="pre">query_accessible_rows</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cls</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_or_token</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#baselayer.app.models.AccessibleIfUserMatches.query_accessible_rows" title="Permalink to this definition"></a></dt>
<dd><p>Construct a Query object that, when executed, returns the rows of a
specified table that are accessible to a specified user or token.
All query based functions will be deprecated when moving to
SQL Alchemy 2.0 in favor of select functions.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>cls</strong><span class="classifier"><cite>baselayer.app.models.DeclarativeMeta</cite></span></dt><dd><p>The mapped class of the target table.</p>
</dd>
<dt><strong>user_or_token</strong><span class="classifier"><cite>baselayer.app.models.User</cite> or <cite>baselayer.app.models.Token</cite></span></dt><dd><p>The User or Token to check.</p>
</dd>
<dt><strong>columns</strong><span class="classifier">list of sqlalchemy.Column, optional, default None</span></dt><dd><p>The columns to retrieve from the target table. If None, queries
the mapped class directly and returns mapped instances.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>query</strong><span class="classifier">sqlalchemy.Query</span></dt><dd><p>Query for the accessible rows.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="baselayer.app.models.AccessibleIfUserMatches.relationship_names">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">relationship_names</span></span><a class="headerlink" href="#baselayer.app.models.AccessibleIfUserMatches.relationship_names" title="Permalink to this definition"></a></dt>
<dd><p>List of names of each relationship in the chain.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="baselayer.app.models.AccessibleIfUserMatches.select_accessible_rows">
<span class="sig-name descname"><span class="pre">select_accessible_rows</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cls</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_or_token</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#baselayer.app.models.AccessibleIfUserMatches.select_accessible_rows" title="Permalink to this definition"></a></dt>
<dd><p>Construct a Select object that, when executed, returns the rows of a
specified table that are accessible to a specified user or token.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>cls</strong><span class="classifier"><cite>baselayer.app.models.DeclarativeMeta</cite></span></dt><dd><p>The mapped class of the target table.</p>
</dd>
<dt><strong>user_or_token</strong><span class="classifier"><cite>baselayer.app.models.User</cite> or <cite>baselayer.app.models.Token</cite></span></dt><dd><p>The User or Token to check.</p>
</dd>
<dt><strong>columns</strong><span class="classifier">list of sqlalchemy.Column, optional, default None</span></dt><dd><p>The columns to retrieve from the target table. If None, queries
the mapped class directly and returns mapped instances.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>sqlalchemy select object</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="baselayer.app.models.ComposedAccessControl">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">baselayer.app.models.</span></span><span class="sig-name descname"><span class="pre">ComposedAccessControl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">access_controls</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logic</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'and'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#baselayer.app.models.ComposedAccessControl" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Attributes</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>access_controls</strong></dt><dd></dd>
<dt><strong>logic</strong></dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">Methods</p>
<table class="autosummary longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">check_cls_for_attributes</span></code>(cls, attrs)</p></td>
<td><p>Check that a target class has the specified attributes.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#baselayer.app.models.ComposedAccessControl.query_accessible_rows" title="baselayer.app.models.ComposedAccessControl.query_accessible_rows"><code class="xref py py-obj docutils literal notranslate"><span class="pre">query_accessible_rows</span></code></a>(cls, user_or_token[, ...])</p></td>
<td><p>Construct a Query object that, when executed, returns the rows of a specified table that are accessible to a specified user or token.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#baselayer.app.models.ComposedAccessControl.select_accessible_rows" title="baselayer.app.models.ComposedAccessControl.select_accessible_rows"><code class="xref py py-obj docutils literal notranslate"><span class="pre">select_accessible_rows</span></code></a>(cls, user_or_token[, ...])</p></td>
<td><p>Construct a Select object that, when executed, returns the rows of a specified table that are accessible to a specified user or token.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">user_id_from_user_or_token</span></code>(user_or_token)</p></td>
<td><p>Return the user_id associated with a specified User or Token object.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt class="sig sig-object py" id="baselayer.app.models.ComposedAccessControl.query_accessible_rows">
<span class="sig-name descname"><span class="pre">query_accessible_rows</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cls</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_or_token</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#baselayer.app.models.ComposedAccessControl.query_accessible_rows" title="Permalink to this definition"></a></dt>
<dd><p>Construct a Query object that, when executed, returns the rows of a
specified table that are accessible to a specified user or token.
All query based functions will be deprecated when moving to
SQL Alchemy 2.0 in favor of select functions.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>cls</strong><span class="classifier"><cite>baselayer.app.models.DeclarativeMeta</cite></span></dt><dd><p>The mapped class of the target table.</p>
</dd>
<dt><strong>user_or_token</strong><span class="classifier"><cite>baselayer.app.models.User</cite> or <cite>baselayer.app.models.Token</cite></span></dt><dd><p>The User or Token to check.</p>
</dd>
<dt><strong>columns</strong><span class="classifier">list of sqlalchemy.Column, optional, default None</span></dt><dd><p>The columns to retrieve from the target table. If None, queries
the mapped class directly and returns mapped instances.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>query</strong><span class="classifier">sqlalchemy.Query</span></dt><dd><p>Query for the accessible rows.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="baselayer.app.models.ComposedAccessControl.select_accessible_rows">
<span class="sig-name descname"><span class="pre">select_accessible_rows</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cls</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_or_token</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#baselayer.app.models.ComposedAccessControl.select_accessible_rows" title="Permalink to this definition"></a></dt>
<dd><p>Construct a Select object that, when executed, returns the rows of a
specified table that are accessible to a specified user or token.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>cls</strong><span class="classifier"><cite>baselayer.app.models.DeclarativeMeta</cite></span></dt><dd><p>The mapped class of the target table.</p>
</dd>
<dt><strong>user_or_token</strong><span class="classifier"><cite>baselayer.app.models.User</cite> or <cite>baselayer.app.models.Token</cite></span></dt><dd><p>The User or Token to check.</p>
</dd>
<dt><strong>columns</strong><span class="classifier">list of sqlalchemy.Column, optional, default None</span></dt><dd><p>The columns to retrieve from the target table. If None, queries
the mapped class directly and returns mapped instances.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>sqlalchemy select object</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="baselayer.app.models.CronJobRun">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">baselayer.app.models.</span></span><span class="sig-name descname"><span class="pre">CronJobRun</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#baselayer.app.models.CronJobRun" title="Permalink to this definition"></a></dt>
<dd><p>A record of a run (or attempted run) of a cron job.</p>
<dl class="field-list simple">
<dt class="field-odd">Attributes</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>created_at</strong></dt><dd><p>UTC time of insertion of object’s row into the database.</p>
</dd>
<dt><strong>exit_status</strong></dt><dd><p>Exit status of cron job subprocess (e.g. 0 or 1).</p>
</dd>
<dt><strong>id</strong></dt><dd><p>Unique object identifier.</p>
</dd>
<dt><strong>modified</strong></dt><dd><p>UTC time the object’s row was last modified in the database.</p>
</dd>
<dt><strong>output</strong></dt><dd><p>Cron job’s subprocess output, or exception string.</p>
</dd>
<dt><strong>script</strong></dt><dd><p>Name of script being run.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Methods</p>
<table class="autosummary longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">create_or_get</span></code>(id)</p></td>
<td><p>Return a new <cite>cls</cite> if an instance with the specified primary key does not exist, else return the existing instance.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get</span></code>(id_or_list, user_or_token[, mode, ...])</p></td>
<td><p>Return a database record if it is accessible to the specified User or Token.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_all</span></code>(user_or_token[, mode, options, columns])</p></td>
<td><p>Retrieve all database records accessible by the specified User or token.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_if_accessible_by</span></code>(cls_id, user_or_token)</p></td>
<td><p>Return a database record if it is accessible to the specified User or Token.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_if_readable_by</span></code>(ident, user_or_token[, ...])</p></td>
<td><p>Return an object from the database if the requesting User or Token has access to read the object.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_records_accessible_by</span></code>(user_or_token[, ...])</p></td>
<td><p>Retrieve all database records accessible by the specified User or token.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">is_accessible_by</span></code>(user_or_token[, mode])</p></td>
<td><p>Check if a User or Token has a specified type of access to this database record.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">is_readable_by</span></code>(user_or_token)</p></td>
<td><p>Return a boolean indicating whether a User or Token has read access to this object.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">query_records_accessible_by</span></code>(user_or_token[, ...])</p></td>
<td><p>Return the query for all database records accessible by the specified User or token.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">select</span></code>(user_or_token[, mode, options, columns])</p></td>
<td><p>Return the select statement for all database records accessible by the specified User or token.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_dict</span></code>()</p></td>
<td><p>Serialize this object to a Python dictionary.</p></td>
</tr>
</tbody>
</table>
<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.CronJobRun.created_at">
<span class="sig-name descname"><span class="pre">created_at</span></span><a class="headerlink" href="#baselayer.app.models.CronJobRun.created_at" title="Permalink to this definition"></a></dt>
<dd><p>UTC time of insertion of object’s row into the database.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.CronJobRun.exit_status">
<span class="sig-name descname"><span class="pre">exit_status</span></span><a class="headerlink" href="#baselayer.app.models.CronJobRun.exit_status" title="Permalink to this definition"></a></dt>
<dd><p>Exit status of cron job subprocess (e.g. 0 or 1).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.CronJobRun.id">
<span class="sig-name descname"><span class="pre">id</span></span><a class="headerlink" href="#baselayer.app.models.CronJobRun.id" title="Permalink to this definition"></a></dt>
<dd><p>Unique object identifier.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.CronJobRun.modified">
<span class="sig-name descname"><span class="pre">modified</span></span><a class="headerlink" href="#baselayer.app.models.CronJobRun.modified" title="Permalink to this definition"></a></dt>
<dd><p>UTC time the object’s row was last modified in the database.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.CronJobRun.output">
<span class="sig-name descname"><span class="pre">output</span></span><a class="headerlink" href="#baselayer.app.models.CronJobRun.output" title="Permalink to this definition"></a></dt>
<dd><p>Cron job’s subprocess output, or exception string.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.CronJobRun.script">
<span class="sig-name descname"><span class="pre">script</span></span><a class="headerlink" href="#baselayer.app.models.CronJobRun.script" title="Permalink to this definition"></a></dt>
<dd><p>Name of script being run.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="baselayer.app.models.CustomUserAccessControl">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">baselayer.app.models.</span></span><span class="sig-name descname"><span class="pre">CustomUserAccessControl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query_or_query_generator</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#baselayer.app.models.CustomUserAccessControl" title="Permalink to this definition"></a></dt>
<dd><p class="rubric">Methods</p>
<table class="autosummary longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">check_cls_for_attributes</span></code>(cls, attrs)</p></td>
<td><p>Check that a target class has the specified attributes.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#baselayer.app.models.CustomUserAccessControl.query_accessible_rows" title="baselayer.app.models.CustomUserAccessControl.query_accessible_rows"><code class="xref py py-obj docutils literal notranslate"><span class="pre">query_accessible_rows</span></code></a>(cls, user_or_token[, ...])</p></td>
<td><p>Construct a Query object that, when executed, returns the rows of a specified table that are accessible to a specified user or token.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#baselayer.app.models.CustomUserAccessControl.select_accessible_rows" title="baselayer.app.models.CustomUserAccessControl.select_accessible_rows"><code class="xref py py-obj docutils literal notranslate"><span class="pre">select_accessible_rows</span></code></a>(cls, user_or_token[, ...])</p></td>
<td><p>Construct a Select object that, when executed, returns the rows of a specified table that are accessible to a specified user or token.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">user_id_from_user_or_token</span></code>(user_or_token)</p></td>
<td><p>Return the user_id associated with a specified User or Token object.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt class="sig sig-object py" id="baselayer.app.models.CustomUserAccessControl.query_accessible_rows">
<span class="sig-name descname"><span class="pre">query_accessible_rows</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cls</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_or_token</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#baselayer.app.models.CustomUserAccessControl.query_accessible_rows" title="Permalink to this definition"></a></dt>
<dd><p>Construct a Query object that, when executed, returns the rows of a
specified table that are accessible to a specified user or token.
All query based functions will be deprecated when moving to
SQL Alchemy 2.0 in favor of select functions.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>cls</strong><span class="classifier"><cite>baselayer.app.models.DeclarativeMeta</cite></span></dt><dd><p>The mapped class of the target table.</p>
</dd>
<dt><strong>user_or_token</strong><span class="classifier"><cite>baselayer.app.models.User</cite> or <cite>baselayer.app.models.Token</cite></span></dt><dd><p>The User or Token to check.</p>
</dd>
<dt><strong>columns</strong><span class="classifier">list of sqlalchemy.Column, optional, default None</span></dt><dd><p>The columns to retrieve from the target table. If None, queries
the mapped class directly and returns mapped instances.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>query</strong><span class="classifier">sqlalchemy.Query</span></dt><dd><p>Query for the accessible rows.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="baselayer.app.models.CustomUserAccessControl.select_accessible_rows">
<span class="sig-name descname"><span class="pre">select_accessible_rows</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cls</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_or_token</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#baselayer.app.models.CustomUserAccessControl.select_accessible_rows" title="Permalink to this definition"></a></dt>
<dd><p>Construct a Select object that, when executed, returns the rows of a
specified table that are accessible to a specified user or token.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>cls</strong><span class="classifier"><cite>baselayer.app.models.DeclarativeMeta</cite></span></dt><dd><p>The mapped class of the target table.</p>
</dd>
<dt><strong>user_or_token</strong><span class="classifier"><cite>baselayer.app.models.User</cite> or <cite>baselayer.app.models.Token</cite></span></dt><dd><p>The User or Token to check.</p>
</dd>
<dt><strong>columns</strong><span class="classifier">list of sqlalchemy.Column, optional, default None</span></dt><dd><p>The columns to retrieve from the target table. If None, queries
the mapped class directly and returns mapped instances.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>sqlalchemy.Select object</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="baselayer.app.models.JoinModel">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">baselayer.app.models.</span></span><span class="sig-name descname"><span class="pre">JoinModel</span></span><a class="headerlink" href="#baselayer.app.models.JoinModel" title="Permalink to this definition"></a></dt>
<dd><p>Dummy class that join_models subclass. Provides an easy way to
access all join_model mapped classes via the __subclasses__() method.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="baselayer.app.models.Public">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">baselayer.app.models.</span></span><span class="sig-name descname"><span class="pre">Public</span></span><a class="headerlink" href="#baselayer.app.models.Public" title="Permalink to this definition"></a></dt>
<dd><p>A record accessible to anyone.</p>
<p class="rubric">Methods</p>
<table class="autosummary longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">check_cls_for_attributes</span></code>(cls, attrs)</p></td>
<td><p>Check that a target class has the specified attributes.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#baselayer.app.models.Public.query_accessible_rows" title="baselayer.app.models.Public.query_accessible_rows"><code class="xref py py-obj docutils literal notranslate"><span class="pre">query_accessible_rows</span></code></a>(cls, user_or_token[, ...])</p></td>
<td><p>Construct a Query object that, when executed, returns the rows of a specified table that are accessible to a specified user or token.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#baselayer.app.models.Public.select_accessible_rows" title="baselayer.app.models.Public.select_accessible_rows"><code class="xref py py-obj docutils literal notranslate"><span class="pre">select_accessible_rows</span></code></a>(cls, user_or_token[, ...])</p></td>
<td><p>Construct a Select object that, when executed, returns the rows of a specified table that are accessible to a specified user or token.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">user_id_from_user_or_token</span></code>(user_or_token)</p></td>
<td><p>Return the user_id associated with a specified User or Token object.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt class="sig sig-object py" id="baselayer.app.models.Public.query_accessible_rows">
<span class="sig-name descname"><span class="pre">query_accessible_rows</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cls</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_or_token</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#baselayer.app.models.Public.query_accessible_rows" title="Permalink to this definition"></a></dt>
<dd><p>Construct a Query object that, when executed, returns the rows of a
specified table that are accessible to a specified user or token.
All query based functions will be deprecated when moving to
SQL Alchemy 2.0 in favor of select functions.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>cls</strong><span class="classifier"><cite>baselayer.app.models.DeclarativeMeta</cite></span></dt><dd><p>The mapped class of the target table.</p>
</dd>
<dt><strong>user_or_token</strong><span class="classifier"><cite>baselayer.app.models.User</cite> or <cite>baselayer.app.models.Token</cite></span></dt><dd><p>The User or Token to check.</p>
</dd>
<dt><strong>columns</strong><span class="classifier">list of sqlalchemy.Column, optional, default None</span></dt><dd><p>The columns to retrieve from the target table. If None, queries
the mapped class directly and returns mapped instances.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>query</strong><span class="classifier">sqlalchemy.Query</span></dt><dd><p>Query for the accessible rows.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="baselayer.app.models.Public.select_accessible_rows">
<span class="sig-name descname"><span class="pre">select_accessible_rows</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cls</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_or_token</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#baselayer.app.models.Public.select_accessible_rows" title="Permalink to this definition"></a></dt>
<dd><p>Construct a Select object that, when executed, returns the rows of a
specified table that are accessible to a specified user or token.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>cls</strong><span class="classifier"><cite>baselayer.app.models.DeclarativeMeta</cite></span></dt><dd><p>The mapped class of the target table.</p>
</dd>
<dt><strong>user_or_token</strong><span class="classifier"><cite>baselayer.app.models.User</cite> or <cite>baselayer.app.models.Token</cite></span></dt><dd><p>The User or Token to check.</p>
</dd>
<dt><strong>columns</strong><span class="classifier">list of sqlalchemy.Column, optional, default None</span></dt><dd><p>The columns to retrieve from the target table. If None, queries
the mapped class directly and returns mapped instances.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>sqlalchemy select object</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="baselayer.app.models.Restricted">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">baselayer.app.models.</span></span><span class="sig-name descname"><span class="pre">Restricted</span></span><a class="headerlink" href="#baselayer.app.models.Restricted" title="Permalink to this definition"></a></dt>
<dd><p>A record that can only be accessed by a System Admin.</p>
<p class="rubric">Methods</p>
<table class="autosummary longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">check_cls_for_attributes</span></code>(cls, attrs)</p></td>
<td><p>Check that a target class has the specified attributes.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#baselayer.app.models.Restricted.query_accessible_rows" title="baselayer.app.models.Restricted.query_accessible_rows"><code class="xref py py-obj docutils literal notranslate"><span class="pre">query_accessible_rows</span></code></a>(cls, user_or_token[, ...])</p></td>
<td><p>Construct a Query object that, when executed, returns the rows of a specified table that are accessible to a specified user or token.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#baselayer.app.models.Restricted.select_accessible_rows" title="baselayer.app.models.Restricted.select_accessible_rows"><code class="xref py py-obj docutils literal notranslate"><span class="pre">select_accessible_rows</span></code></a>(cls, user_or_token[, ...])</p></td>
<td><p>Construct a Select object that, when executed, returns the rows of a specified table that are accessible to a specified user or token.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">user_id_from_user_or_token</span></code>(user_or_token)</p></td>
<td><p>Return the user_id associated with a specified User or Token object.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt class="sig sig-object py" id="baselayer.app.models.Restricted.query_accessible_rows">
<span class="sig-name descname"><span class="pre">query_accessible_rows</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cls</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_or_token</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#baselayer.app.models.Restricted.query_accessible_rows" title="Permalink to this definition"></a></dt>
<dd><p>Construct a Query object that, when executed, returns the rows of a
specified table that are accessible to a specified user or token.
All query based functions will be deprecated when moving to
SQL Alchemy 2.0 in favor of select functions.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>cls</strong><span class="classifier"><cite>baselayer.app.models.DeclarativeMeta</cite></span></dt><dd><p>The mapped class of the target table.</p>
</dd>
<dt><strong>user_or_token</strong><span class="classifier"><cite>baselayer.app.models.User</cite> or <cite>baselayer.app.models.Token</cite></span></dt><dd><p>The User or Token to check.</p>
</dd>
<dt><strong>columns</strong><span class="classifier">list of sqlalchemy.Column, optional, default None</span></dt><dd><p>The columns to retrieve from the target table. If None, queries
the mapped class directly and returns mapped instances.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>query</strong><span class="classifier">sqlalchemy.Query</span></dt><dd><p>Query for the accessible rows.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="baselayer.app.models.Restricted.select_accessible_rows">
<span class="sig-name descname"><span class="pre">select_accessible_rows</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cls</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_or_token</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#baselayer.app.models.Restricted.select_accessible_rows" title="Permalink to this definition"></a></dt>
<dd><p>Construct a Select object that, when executed, returns the rows of a
specified table that are accessible to a specified user or token.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>cls</strong><span class="classifier"><cite>baselayer.app.models.DeclarativeMeta</cite></span></dt><dd><p>The mapped class of the target table.</p>
</dd>
<dt><strong>user_or_token</strong><span class="classifier"><cite>baselayer.app.models.User</cite> or <cite>baselayer.app.models.Token</cite></span></dt><dd><p>The User or Token to check.</p>
</dd>
<dt><strong>columns</strong><span class="classifier">list of sqlalchemy.Column, optional, default None</span></dt><dd><p>The columns to retrieve from the target table. If None, queries
the mapped class directly and returns mapped instances.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>sqlalchemy.Select object</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="baselayer.app.models.Role">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">baselayer.app.models.</span></span><span class="sig-name descname"><span class="pre">Role</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#baselayer.app.models.Role" title="Permalink to this definition"></a></dt>
<dd><p>A collection of ACLs. Roles map Users to ACLs. One User may assume
multiple Roles.</p>
<dl class="field-list simple">
<dt class="field-odd">Attributes</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>acls</strong></dt><dd><p>ACLs associated with the Role.</p>
</dd>
<dt><strong>created_at</strong></dt><dd><p>UTC time of insertion of object’s row into the database.</p>
</dd>
<dt><strong>id</strong></dt><dd><p>Role name.</p>
</dd>
<dt><strong>modified</strong></dt><dd><p>UTC time the object’s row was last modified in the database.</p>
</dd>
<dt><strong>users</strong></dt><dd><p>Users who have this Role.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Methods</p>
<table class="autosummary longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">create_or_get</span></code>(id)</p></td>
<td><p>Return a new <cite>cls</cite> if an instance with the specified primary key does not exist, else return the existing instance.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get</span></code>(id_or_list, user_or_token[, mode, ...])</p></td>
<td><p>Return a database record if it is accessible to the specified User or Token.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_all</span></code>(user_or_token[, mode, options, columns])</p></td>
<td><p>Retrieve all database records accessible by the specified User or token.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_if_accessible_by</span></code>(cls_id, user_or_token)</p></td>
<td><p>Return a database record if it is accessible to the specified User or Token.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_if_readable_by</span></code>(ident, user_or_token[, ...])</p></td>
<td><p>Return an object from the database if the requesting User or Token has access to read the object.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_records_accessible_by</span></code>(user_or_token[, ...])</p></td>
<td><p>Retrieve all database records accessible by the specified User or token.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">is_accessible_by</span></code>(user_or_token[, mode])</p></td>
<td><p>Check if a User or Token has a specified type of access to this database record.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">is_readable_by</span></code>(user_or_token)</p></td>
<td><p>Return a boolean indicating whether a User or Token has read access to this object.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">query_records_accessible_by</span></code>(user_or_token[, ...])</p></td>
<td><p>Return the query for all database records accessible by the specified User or token.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">select</span></code>(user_or_token[, mode, options, columns])</p></td>
<td><p>Return the select statement for all database records accessible by the specified User or token.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_dict</span></code>()</p></td>
<td><p>Serialize this object to a Python dictionary.</p></td>
</tr>
</tbody>
</table>
<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.Role.acls">
<span class="sig-name descname"><span class="pre">acls</span></span><a class="headerlink" href="#baselayer.app.models.Role.acls" title="Permalink to this definition"></a></dt>
<dd><p>ACLs associated with the Role.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.Role.created_at">
<span class="sig-name descname"><span class="pre">created_at</span></span><a class="headerlink" href="#baselayer.app.models.Role.created_at" title="Permalink to this definition"></a></dt>
<dd><p>UTC time of insertion of object’s row into the database.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.Role.id">
<span class="sig-name descname"><span class="pre">id</span></span><a class="headerlink" href="#baselayer.app.models.Role.id" title="Permalink to this definition"></a></dt>
<dd><p>Role name.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.Role.modified">
<span class="sig-name descname"><span class="pre">modified</span></span><a class="headerlink" href="#baselayer.app.models.Role.modified" title="Permalink to this definition"></a></dt>
<dd><p>UTC time the object’s row was last modified in the database.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.Role.users">
<span class="sig-name descname"><span class="pre">users</span></span><a class="headerlink" href="#baselayer.app.models.Role.users" title="Permalink to this definition"></a></dt>
<dd><p>Users who have this Role.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="baselayer.app.models.RoleACL">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">baselayer.app.models.</span></span><span class="sig-name descname"><span class="pre">RoleACL</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#baselayer.app.models.RoleACL" title="Permalink to this definition"></a></dt>
<dd><p>Join table class mapping Roles to ACLs.</p>
<dl class="field-list simple">
<dt class="field-odd">Attributes</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>acl</strong></dt><dd></dd>
<dt><strong>acl_id</strong></dt><dd></dd>
<dt><strong>created_at</strong></dt><dd><p>UTC time of insertion of object’s row into the database.</p>
</dd>
<dt><strong>id</strong></dt><dd><p>Unique object identifier.</p>
</dd>
<dt><strong>modified</strong></dt><dd><p>UTC time the object’s row was last modified in the database.</p>
</dd>
<dt><strong>role</strong></dt><dd></dd>
<dt><strong>role_id</strong></dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">Methods</p>
<table class="autosummary longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">create_or_get</span></code>(id)</p></td>
<td><p>Return a new <cite>cls</cite> if an instance with the specified primary key does not exist, else return the existing instance.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get</span></code>(id_or_list, user_or_token[, mode, ...])</p></td>
<td><p>Return a database record if it is accessible to the specified User or Token.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_all</span></code>(user_or_token[, mode, options, columns])</p></td>
<td><p>Retrieve all database records accessible by the specified User or token.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_if_accessible_by</span></code>(cls_id, user_or_token)</p></td>
<td><p>Return a database record if it is accessible to the specified User or Token.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_if_readable_by</span></code>(ident, user_or_token[, ...])</p></td>
<td><p>Return an object from the database if the requesting User or Token has access to read the object.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_records_accessible_by</span></code>(user_or_token[, ...])</p></td>
<td><p>Retrieve all database records accessible by the specified User or token.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">is_accessible_by</span></code>(user_or_token[, mode])</p></td>
<td><p>Check if a User or Token has a specified type of access to this database record.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">is_readable_by</span></code>(user_or_token)</p></td>
<td><p>Return a boolean indicating whether a User or Token has read access to this object.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">query_records_accessible_by</span></code>(user_or_token[, ...])</p></td>
<td><p>Return the query for all database records accessible by the specified User or token.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">select</span></code>(user_or_token[, mode, options, columns])</p></td>
<td><p>Return the select statement for all database records accessible by the specified User or token.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_dict</span></code>()</p></td>
<td><p>Serialize this object to a Python dictionary.</p></td>
</tr>
</tbody>
</table>
<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.RoleACL.create">
<span class="sig-name descname"><span class="pre">create</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;baselayer.app.models.AccessibleIfRelatedRowsAreAccessible</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#baselayer.app.models.RoleACL.create" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.RoleACL.created_at">
<span class="sig-name descname"><span class="pre">created_at</span></span><a class="headerlink" href="#baselayer.app.models.RoleACL.created_at" title="Permalink to this definition"></a></dt>
<dd><p>UTC time of insertion of object’s row into the database.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.RoleACL.id">
<span class="sig-name descname"><span class="pre">id</span></span><a class="headerlink" href="#baselayer.app.models.RoleACL.id" title="Permalink to this definition"></a></dt>
<dd><p>Unique object identifier.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.RoleACL.modified">
<span class="sig-name descname"><span class="pre">modified</span></span><a class="headerlink" href="#baselayer.app.models.RoleACL.modified" title="Permalink to this definition"></a></dt>
<dd><p>UTC time the object’s row was last modified in the database.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.RoleACL.read">
<span class="sig-name descname"><span class="pre">read</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;baselayer.app.models.AccessibleIfRelatedRowsAreAccessible</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#baselayer.app.models.RoleACL.read" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="baselayer.app.models.SlugifiedStr">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">baselayer.app.models.</span></span><span class="sig-name descname"><span class="pre">SlugifiedStr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#baselayer.app.models.SlugifiedStr" title="Permalink to this definition"></a></dt>
<dd><p>Slugified string</p>
<dl class="field-list simple">
<dt class="field-odd">Attributes</dt>
<dd class="field-odd"><dl class="simple">
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">comparator_factory</span></code></dt><dd><p>Base class for custom comparison operations defined at the type level.</p>
</dd>
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">python_type</span></code></dt><dd><p>Return the Python type object expected to be returned by instances of this type, if known.</p>
</dd>
<dt><strong>sort_key_function</strong></dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">Methods</p>
<table class="autosummary longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">Comparator</span></code>(expr)</p></td>
<td><p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">TypeEngine.Comparator</span></code> that is specific to <code class="xref py py-class docutils literal notranslate"><span class="pre">TypeDecorator</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">adapt</span></code>(cls, **kw)</p></td>
<td><p>Produce an &quot;adapted&quot; form of this type, given an &quot;impl&quot; class to work with.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">as_generic</span></code>([allow_nulltype])</p></td>
<td><p>Return an instance of the generic type corresponding to this type using heuristic rule.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">bind_expression</span></code>(bindparam)</p></td>
<td><p>Given a bind value (i.e.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">bind_processor</span></code>(dialect)</p></td>
<td><p>Provide a bound value processing function for the given <code class="xref py py-class docutils literal notranslate"><span class="pre">Dialect</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">coerce_compared_value</span></code>(op, value)</p></td>
<td><p>Suggest a type for a 'coerced' Python value in an expression.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">column_expression</span></code>(column)</p></td>
<td><p>Given a SELECT column expression, return a wrapping SQL expression.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">compare_against_backend</span></code>(dialect, conn_type)</p></td>
<td><p>Compare this type against the given backend type.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">compare_values</span></code>(x, y)</p></td>
<td><p>Given two values, compare them for equality.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">compile</span></code>([dialect])</p></td>
<td><p>Produce a string-compiled form of this <code class="xref py py-class docutils literal notranslate"><span class="pre">TypeEngine</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">copy</span></code>(**kw)</p></td>
<td><p>Produce a copy of this <code class="xref py py-class docutils literal notranslate"><span class="pre">TypeDecorator</span></code> instance.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">dialect_impl</span></code>(dialect)</p></td>
<td><p>Return a dialect-specific implementation for this <code class="xref py py-class docutils literal notranslate"><span class="pre">TypeEngine</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">evaluates_none</span></code>()</p></td>
<td><p>Return a copy of this type which has the <code class="xref py py-attr docutils literal notranslate"><span class="pre">should_evaluate_none</span></code> flag set to True.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_children</span></code>([omit_attrs])</p></td>
<td><p>Return immediate child <code class="xref py py-class docutils literal notranslate"><span class="pre">visitors.Traversible</span></code> elements of this <code class="xref py py-class docutils literal notranslate"><span class="pre">visitors.Traversible</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_dbapi_type</span></code>(dbapi)</p></td>
<td><p>Return the DBAPI type object represented by this <code class="xref py py-class docutils literal notranslate"><span class="pre">TypeDecorator</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#baselayer.app.models.SlugifiedStr.impl" title="baselayer.app.models.SlugifiedStr.impl"><code class="xref py py-obj docutils literal notranslate"><span class="pre">impl</span></code></a></p></td>
<td><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">String</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">literal_processor</span></code>(dialect)</p></td>
<td><p>Provide a literal processing function for the given <code class="xref py py-class docutils literal notranslate"><span class="pre">Dialect</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_dialect_impl</span></code>(dialect)</p></td>
<td><p>Return a <code class="xref py py-class docutils literal notranslate"><span class="pre">TypeEngine</span></code> object corresponding to a dialect.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#baselayer.app.models.SlugifiedStr.process_bind_param" title="baselayer.app.models.SlugifiedStr.process_bind_param"><code class="xref py py-obj docutils literal notranslate"><span class="pre">process_bind_param</span></code></a>(value, dialect)</p></td>
<td><p>Receive a bound parameter value to be converted.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">process_literal_param</span></code>(value, dialect)</p></td>
<td><p>Receive a literal parameter value to be rendered inline within a statement.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#baselayer.app.models.SlugifiedStr.process_result_value" title="baselayer.app.models.SlugifiedStr.process_result_value"><code class="xref py py-obj docutils literal notranslate"><span class="pre">process_result_value</span></code></a>(value, dialect)</p></td>
<td><p>Receive a result-row column value to be converted.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">result_processor</span></code>(dialect, coltype)</p></td>
<td><p>Provide a result value processing function for the given <code class="xref py py-class docutils literal notranslate"><span class="pre">Dialect</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">type_engine</span></code>(dialect)</p></td>
<td><p>Return a dialect-specific <code class="xref py py-class docutils literal notranslate"><span class="pre">TypeEngine</span></code> instance for this <code class="xref py py-class docutils literal notranslate"><span class="pre">TypeDecorator</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">with_variant</span></code>(type_, dialect_name)</p></td>
<td><p>Produce a new type object that will utilize the given type when applied to the dialect of the given name.</p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default">
<colgroup>
<col style="width: 58%" />
<col style="width: 42%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>copy_value</strong></p></td>
<td></td>
</tr>
</tbody>
</table>
<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.SlugifiedStr.cache_ok">
<span class="sig-name descname"><span class="pre">cache_ok</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">True</span></em><a class="headerlink" href="#baselayer.app.models.SlugifiedStr.cache_ok" title="Permalink to this definition"></a></dt>
<dd><p>Indicate if statements using this <code class="xref py py-class docutils literal notranslate"><span class="pre">ExternalType</span></code> are “safe to
cache”.</p>
<p>The default value <code class="docutils literal notranslate"><span class="pre">None</span></code> will emit a warning and then not allow caching
of a statement which includes this type.   Set to <code class="docutils literal notranslate"><span class="pre">False</span></code> to disable
statements using this type from being cached at all without a warning.
When set to <code class="docutils literal notranslate"><span class="pre">True</span></code>, the object’s class and selected elements from its
state will be used as part of the cache key.  For example, using a
<code class="xref py py-class docutils literal notranslate"><span class="pre">TypeDecorator</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyType</span><span class="p">(</span><span class="n">TypeDecorator</span><span class="p">):</span>
    <span class="n">impl</span> <span class="o">=</span> <span class="n">String</span>

    <span class="n">cache_ok</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">choices</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">choices</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">choices</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">internal_only</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
<p>The cache key for the above type would be equivalent to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">MyType</span><span class="p">([</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">_static_cache_key</span>
<span class="go">(&lt;class &#39;__main__.MyType&#39;&gt;, (&#39;choices&#39;, (&#39;a&#39;, &#39;b&#39;, &#39;c&#39;)))</span>
</pre></div>
</div>
<p>The caching scheme will extract attributes from the type that correspond
to the names of parameters in the <code class="docutils literal notranslate"><span class="pre">__init__()</span></code> method.  Above, the
“choices” attribute becomes part of the cache key but “internal_only”
does not, because there is no parameter named “internal_only”.</p>
<p>The requirements for cacheable elements is that they are hashable
and also that they indicate the same SQL rendered for expressions using
this type every time for a given cache value.</p>
<p>To accommodate for datatypes that refer to unhashable structures such
as dictionaries, sets and lists, these objects can be made “cacheable”
by assigning hashable structures to the attributes whose names
correspond with the names of the arguments.  For example, a datatype
which accepts a dictionary of lookup values may publish this as a sorted
series of tuples.   Given a previously un-cacheable type as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">LookupType</span><span class="p">(</span><span class="n">UserDefinedType</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;a custom type that accepts a dictionary as a parameter.</span>

<span class="sd">    this is the non-cacheable version, as &quot;self.lookup&quot; is not</span>
<span class="sd">    hashable.</span>

<span class="sd">    &#39;&#39;&#39;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lookup</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lookup</span> <span class="o">=</span> <span class="n">lookup</span>

    <span class="k">def</span> <span class="nf">get_col_spec</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;VARCHAR(255)&quot;</span>

    <span class="k">def</span> <span class="nf">bind_processor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dialect</span><span class="p">):</span>
        <span class="c1"># ...  works with &quot;self.lookup&quot; ...</span>
</pre></div>
</div>
<p>Where “lookup” is a dictionary.  The type will not be able to generate
a cache key:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">type_</span> <span class="o">=</span> <span class="n">LookupType</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="mi">20</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">type_</span><span class="o">.</span><span class="n">_static_cache_key</span>
<span class="go">&lt;stdin&gt;:1: SAWarning: UserDefinedType LookupType({&#39;a&#39;: 10, &#39;b&#39;: 20}) will not</span>
<span class="go">produce a cache key because the ``cache_ok`` flag is not set to True.</span>
<span class="go">Set this flag to True if this type object&#39;s state is safe to use</span>
<span class="go">in a cache key, or False to disable this warning.</span>
<span class="go">symbol(&#39;no_cache&#39;)</span>
</pre></div>
</div>
<p>If we <strong>did</strong> set up such a cache key, it wouldn’t be usable. We would
get a tuple structure that contains a dictionary inside of it, which
cannot itself be used as a key in a “cache dictionary” such as SQLAlchemy’s
statement cache, since Python dictionaries aren’t hashable:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># set cache_ok = True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">type_</span><span class="o">.</span><span class="n">cache_ok</span> <span class="o">=</span> <span class="kc">True</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># this is the cache key it would generate</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">key</span> <span class="o">=</span> <span class="n">type_</span><span class="o">.</span><span class="n">_static_cache_key</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">key</span>
<span class="go">(&lt;class &#39;__main__.LookupType&#39;&gt;, (&#39;lookup&#39;, {&#39;a&#39;: 10, &#39;b&#39;: 20}))</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># however this key is not hashable, will fail when used with</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># SQLAlchemy statement cache</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">some_cache</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="s2">&quot;some sql value&quot;</span><span class="p">}</span>
<span class="x">Traceback (most recent call last): File &quot;&lt;stdin&gt;&quot;, line 1,</span>
<span class="x">in &lt;module&gt; TypeError: unhashable type: &#39;dict&#39;</span>
</pre></div>
</div>
<p>The type may be made cacheable by assigning a sorted tuple of tuples
to the “.lookup” attribute:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">LookupType</span><span class="p">(</span><span class="n">UserDefinedType</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;a custom type that accepts a dictionary as a parameter.</span>

<span class="sd">    The dictionary is stored both as itself in a private variable,</span>
<span class="sd">    and published in a public variable as a sorted tuple of tuples,</span>
<span class="sd">    which is hashable and will also return the same value for any</span>
<span class="sd">    two equivalent dictionaries.  Note it assumes the keys and</span>
<span class="sd">    values of the dictionary are themselves hashable.</span>

<span class="sd">    &#39;&#39;&#39;</span>

    <span class="n">cache_ok</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lookup</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lookup</span> <span class="o">=</span> <span class="n">lookup</span>

        <span class="c1"># assume keys/values of &quot;lookup&quot; are hashable; otherwise</span>
        <span class="c1"># they would also need to be converted in some way here</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lookup</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span>
            <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">lookup</span><span class="p">[</span><span class="n">key</span><span class="p">])</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">lookup</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_col_spec</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;VARCHAR(255)&quot;</span>

    <span class="k">def</span> <span class="nf">bind_processor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dialect</span><span class="p">):</span>
        <span class="c1"># ...  works with &quot;self._lookup&quot; ...</span>
</pre></div>
</div>
<p>Where above, the cache key for <code class="docutils literal notranslate"><span class="pre">LookupType({&quot;a&quot;:</span> <span class="pre">10,</span> <span class="pre">&quot;b&quot;:</span> <span class="pre">20})</span></code> will be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">LookupType</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="mi">20</span><span class="p">})</span><span class="o">.</span><span class="n">_static_cache_key</span>
<span class="go">(&lt;class &#39;__main__.LookupType&#39;&gt;, (&#39;lookup&#39;, ((&#39;a&#39;, 10), (&#39;b&#39;, 20))))</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.14: </span>- added the <code class="docutils literal notranslate"><span class="pre">cache_ok</span></code> flag to allow
some configurability of caching for <code class="xref py py-class docutils literal notranslate"><span class="pre">TypeDecorator</span></code> classes.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.28: </span>- added the <code class="xref py py-class docutils literal notranslate"><span class="pre">ExternalType</span></code> mixin which
generalizes the <code class="docutils literal notranslate"><span class="pre">cache_ok</span></code> flag to both the <code class="xref py py-class docutils literal notranslate"><span class="pre">TypeDecorator</span></code>
and <code class="xref py py-class docutils literal notranslate"><span class="pre">UserDefinedType</span></code> classes.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="xref std std-ref">sql_caching</span></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.SlugifiedStr.impl">
<span class="sig-name descname"><span class="pre">impl</span></span><a class="headerlink" href="#baselayer.app.models.SlugifiedStr.impl" title="Permalink to this definition"></a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">String</span></code></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="baselayer.app.models.SlugifiedStr.process_bind_param">
<span class="sig-name descname"><span class="pre">process_bind_param</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dialect</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#baselayer.app.models.SlugifiedStr.process_bind_param" title="Permalink to this definition"></a></dt>
<dd><p>Receive a bound parameter value to be converted.</p>
<p>Custom subclasses of <code class="xref py py-class docutils literal notranslate"><span class="pre">_types.TypeDecorator</span></code> should override
this method to provide custom behaviors for incoming data values.
This method is called at <strong>statement execution time</strong> and is passed
the literal Python data value which is to be associated with a bound
parameter in the statement.</p>
<p>The operation could be anything desired to perform custom
behavior, such as transforming or serializing data.
This could also be used as a hook for validating logic.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>value</strong> – Data to operate upon, of any type expected by
this method in the subclass.  Can be <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><strong>dialect</strong> – the <code class="xref py py-class docutils literal notranslate"><span class="pre">Dialect</span></code> in use.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="xref std std-ref">types_typedecorator</span></p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">_types.TypeDecorator.process_result_value()</span></code></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="baselayer.app.models.SlugifiedStr.process_result_value">
<span class="sig-name descname"><span class="pre">process_result_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dialect</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#baselayer.app.models.SlugifiedStr.process_result_value" title="Permalink to this definition"></a></dt>
<dd><p>Receive a result-row column value to be converted.</p>
<p>Custom subclasses of <code class="xref py py-class docutils literal notranslate"><span class="pre">_types.TypeDecorator</span></code> should override
this method to provide custom behaviors for data values
being received in result rows coming from the database.
This method is called at <strong>result fetching time</strong> and is passed
the literal Python data value that’s extracted from a database result
row.</p>
<p>The operation could be anything desired to perform custom
behavior, such as transforming or deserializing data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>value</strong> – Data to operate upon, of any type expected by
this method in the subclass.  Can be <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><strong>dialect</strong> – the <code class="xref py py-class docutils literal notranslate"><span class="pre">Dialect</span></code> in use.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="xref std std-ref">types_typedecorator</span></p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">_types.TypeDecorator.process_bind_param()</span></code></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="baselayer.app.models.Token">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">baselayer.app.models.</span></span><span class="sig-name descname"><span class="pre">Token</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#baselayer.app.models.Token" title="Permalink to this definition"></a></dt>
<dd><p>A command line token that can be used to programmatically access the API
as a particular User.</p>
<dl class="field-list simple">
<dt class="field-odd">Attributes</dt>
<dd class="field-odd"><dl class="simple">
<dt><a class="reference internal" href="#baselayer.app.models.Token.accessible_groups" title="baselayer.app.models.Token.accessible_groups"><code class="xref py py-obj docutils literal notranslate"><span class="pre">accessible_groups</span></code></a></dt><dd><p>Return the list of Groups a User or Token has access to.</p>
</dd>
<dt><a class="reference internal" href="#baselayer.app.models.Token.accessible_streams" title="baselayer.app.models.Token.accessible_streams"><code class="xref py py-obj docutils literal notranslate"><span class="pre">accessible_streams</span></code></a></dt><dd><p>Return the list of Streams a User or Token has access to.</p>
</dd>
<dt><strong>acls</strong></dt><dd><p>The ACLs granted to the Token.</p>
</dd>
<dt><strong>created_at</strong></dt><dd><p>UTC time of insertion of object’s row into the database.</p>
</dd>
<dt><strong>created_by</strong></dt><dd><p>The User that created the token.</p>
</dd>
<dt><strong>created_by_id</strong></dt><dd><p>The ID of the User that created the Token.</p>
</dd>
<dt><a class="reference internal" href="#baselayer.app.models.Token.groups" title="baselayer.app.models.Token.groups"><code class="xref py py-obj docutils literal notranslate"><span class="pre">groups</span></code></a></dt><dd><p>The groups the Token owner is a member of.</p>
</dd>
<dt><strong>id</strong></dt><dd><p>The value of the token. This field is used for authenticating as a User on the command line.</p>
</dd>
<dt><strong>is_admin</strong></dt><dd></dd>
<dt><strong>is_system_admin</strong></dt><dd></dd>
<dt><strong>modified</strong></dt><dd><p>UTC time the object’s row was last modified in the database.</p>
</dd>
<dt><strong>name</strong></dt><dd><p>The name of the token.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Methods</p>
<table class="autosummary longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">create_or_get</span></code>(id)</p></td>
<td><p>Return a new <cite>cls</cite> if an instance with the specified primary key does not exist, else return the existing instance.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get</span></code>(id_or_list, user_or_token[, mode, ...])</p></td>
<td><p>Return a database record if it is accessible to the specified User or Token.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_all</span></code>(user_or_token[, mode, options, columns])</p></td>
<td><p>Retrieve all database records accessible by the specified User or token.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_if_accessible_by</span></code>(cls_id, user_or_token)</p></td>
<td><p>Return a database record if it is accessible to the specified User or Token.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_if_readable_by</span></code>(ident, user_or_token[, ...])</p></td>
<td><p>Return an object from the database if the requesting User or Token has access to read the object.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_records_accessible_by</span></code>(user_or_token[, ...])</p></td>
<td><p>Retrieve all database records accessible by the specified User or token.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">is_accessible_by</span></code>(user_or_token[, mode])</p></td>
<td><p>Check if a User or Token has a specified type of access to this database record.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#baselayer.app.models.Token.is_readable_by" title="baselayer.app.models.Token.is_readable_by"><code class="xref py py-obj docutils literal notranslate"><span class="pre">is_readable_by</span></code></a>(user_or_token)</p></td>
<td><p>Return a boolean indicating whether this Token is readable by the specified User (or Token instance, if a token is passed).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">query_records_accessible_by</span></code>(user_or_token[, ...])</p></td>
<td><p>Return the query for all database records accessible by the specified User or token.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">select</span></code>(user_or_token[, mode, options, columns])</p></td>
<td><p>Return the select statement for all database records accessible by the specified User or token.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_dict</span></code>()</p></td>
<td><p>Serialize this object to a Python dictionary.</p></td>
</tr>
</tbody>
</table>
<dl class="py property">
<dt class="sig sig-object py" id="baselayer.app.models.Token.accessible_groups">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">accessible_groups</span></span><a class="headerlink" href="#baselayer.app.models.Token.accessible_groups" title="Permalink to this definition"></a></dt>
<dd><p>Return the list of Groups a User or Token has access to. For non-admin
Users or Token owners, this corresponds to the Groups they are a member of.
For System Admins, this corresponds to all Groups.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="baselayer.app.models.Token.accessible_streams">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">accessible_streams</span></span><a class="headerlink" href="#baselayer.app.models.Token.accessible_streams" title="Permalink to this definition"></a></dt>
<dd><p>Return the list of Streams a User or Token has access to.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.Token.acls">
<span class="sig-name descname"><span class="pre">acls</span></span><a class="headerlink" href="#baselayer.app.models.Token.acls" title="Permalink to this definition"></a></dt>
<dd><p>The ACLs granted to the Token.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.Token.create">
<span class="sig-name descname"><span class="pre">create</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;baselayer.app.models.AccessibleIfUserMatches</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#baselayer.app.models.Token.create" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.Token.created_at">
<span class="sig-name descname"><span class="pre">created_at</span></span><a class="headerlink" href="#baselayer.app.models.Token.created_at" title="Permalink to this definition"></a></dt>
<dd><p>UTC time of insertion of object’s row into the database.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.Token.created_by">
<span class="sig-name descname"><span class="pre">created_by</span></span><a class="headerlink" href="#baselayer.app.models.Token.created_by" title="Permalink to this definition"></a></dt>
<dd><p>The User that created the token.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.Token.created_by_id">
<span class="sig-name descname"><span class="pre">created_by_id</span></span><a class="headerlink" href="#baselayer.app.models.Token.created_by_id" title="Permalink to this definition"></a></dt>
<dd><p>The ID of the User that created the Token.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.Token.delete">
<span class="sig-name descname"><span class="pre">delete</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;baselayer.app.models.AccessibleIfUserMatches</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#baselayer.app.models.Token.delete" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="baselayer.app.models.Token.groups">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">groups</span></span><a class="headerlink" href="#baselayer.app.models.Token.groups" title="Permalink to this definition"></a></dt>
<dd><p>The groups the Token owner is a member of.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.Token.id">
<span class="sig-name descname"><span class="pre">id</span></span><a class="headerlink" href="#baselayer.app.models.Token.id" title="Permalink to this definition"></a></dt>
<dd><p>The value of the token. This field is used for authenticating as a User on the command line.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="baselayer.app.models.Token.is_readable_by">
<span class="sig-name descname"><span class="pre">is_readable_by</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">user_or_token</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#baselayer.app.models.Token.is_readable_by" title="Permalink to this definition"></a></dt>
<dd><p>Return a boolean indicating whether this Token is readable by the
specified User (or Token instance, if a token is passed).</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>user_or_token</strong><span class="classifier"><cite>baselayer.app.models.User</cite> or <cite>baselayer.app.models.Token</cite></span></dt><dd><p>The User or Token to check.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>readable</strong><span class="classifier">bool</span></dt><dd><p>Whether this Token instance is readable by the User or Token.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.Token.modified">
<span class="sig-name descname"><span class="pre">modified</span></span><a class="headerlink" href="#baselayer.app.models.Token.modified" title="Permalink to this definition"></a></dt>
<dd><p>UTC time the object’s row was last modified in the database.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.Token.name">
<span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#baselayer.app.models.Token.name" title="Permalink to this definition"></a></dt>
<dd><p>The name of the token.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.Token.read">
<span class="sig-name descname"><span class="pre">read</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;baselayer.app.models.AccessibleIfUserMatches</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#baselayer.app.models.Token.read" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.Token.update">
<span class="sig-name descname"><span class="pre">update</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;baselayer.app.models.AccessibleIfUserMatches</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#baselayer.app.models.Token.update" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="baselayer.app.models.TokenACL">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">baselayer.app.models.</span></span><span class="sig-name descname"><span class="pre">TokenACL</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#baselayer.app.models.TokenACL" title="Permalink to this definition"></a></dt>
<dd><p>Join table mapping Tokens to ACLs</p>
<dl class="field-list simple">
<dt class="field-odd">Attributes</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>acl</strong></dt><dd></dd>
<dt><strong>acl_id</strong></dt><dd></dd>
<dt><strong>created_at</strong></dt><dd><p>UTC time of insertion of object’s row into the database.</p>
</dd>
<dt><strong>id</strong></dt><dd><p>Unique object identifier.</p>
</dd>
<dt><strong>modified</strong></dt><dd><p>UTC time the object’s row was last modified in the database.</p>
</dd>
<dt><strong>token</strong></dt><dd></dd>
<dt><strong>token_id</strong></dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">Methods</p>
<table class="autosummary longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">create_or_get</span></code>(id)</p></td>
<td><p>Return a new <cite>cls</cite> if an instance with the specified primary key does not exist, else return the existing instance.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get</span></code>(id_or_list, user_or_token[, mode, ...])</p></td>
<td><p>Return a database record if it is accessible to the specified User or Token.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_all</span></code>(user_or_token[, mode, options, columns])</p></td>
<td><p>Retrieve all database records accessible by the specified User or token.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_if_accessible_by</span></code>(cls_id, user_or_token)</p></td>
<td><p>Return a database record if it is accessible to the specified User or Token.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_if_readable_by</span></code>(ident, user_or_token[, ...])</p></td>
<td><p>Return an object from the database if the requesting User or Token has access to read the object.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_records_accessible_by</span></code>(user_or_token[, ...])</p></td>
<td><p>Retrieve all database records accessible by the specified User or token.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">is_accessible_by</span></code>(user_or_token[, mode])</p></td>
<td><p>Check if a User or Token has a specified type of access to this database record.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">is_readable_by</span></code>(user_or_token)</p></td>
<td><p>Return a boolean indicating whether a User or Token has read access to this object.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">query_records_accessible_by</span></code>(user_or_token[, ...])</p></td>
<td><p>Return the query for all database records accessible by the specified User or token.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">select</span></code>(user_or_token[, mode, options, columns])</p></td>
<td><p>Return the select statement for all database records accessible by the specified User or token.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_dict</span></code>()</p></td>
<td><p>Serialize this object to a Python dictionary.</p></td>
</tr>
</tbody>
</table>
<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.TokenACL.create">
<span class="sig-name descname"><span class="pre">create</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;baselayer.app.models.AccessibleIfRelatedRowsAreAccessible</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#baselayer.app.models.TokenACL.create" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.TokenACL.created_at">
<span class="sig-name descname"><span class="pre">created_at</span></span><a class="headerlink" href="#baselayer.app.models.TokenACL.created_at" title="Permalink to this definition"></a></dt>
<dd><p>UTC time of insertion of object’s row into the database.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.TokenACL.id">
<span class="sig-name descname"><span class="pre">id</span></span><a class="headerlink" href="#baselayer.app.models.TokenACL.id" title="Permalink to this definition"></a></dt>
<dd><p>Unique object identifier.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.TokenACL.modified">
<span class="sig-name descname"><span class="pre">modified</span></span><a class="headerlink" href="#baselayer.app.models.TokenACL.modified" title="Permalink to this definition"></a></dt>
<dd><p>UTC time the object’s row was last modified in the database.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.TokenACL.read">
<span class="sig-name descname"><span class="pre">read</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;baselayer.app.models.AccessibleIfRelatedRowsAreAccessible</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#baselayer.app.models.TokenACL.read" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="baselayer.app.models.User">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">baselayer.app.models.</span></span><span class="sig-name descname"><span class="pre">User</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#baselayer.app.models.User" title="Permalink to this definition"></a></dt>
<dd><p>An application user.</p>
<dl class="field-list simple">
<dt class="field-odd">Attributes</dt>
<dd class="field-odd"><dl class="simple">
<dt><a class="reference internal" href="#baselayer.app.models.User.accessible_groups" title="baselayer.app.models.User.accessible_groups"><code class="xref py py-obj docutils literal notranslate"><span class="pre">accessible_groups</span></code></a></dt><dd><p>Return the list of Groups a User or Token has access to.</p>
</dd>
<dt><a class="reference internal" href="#baselayer.app.models.User.accessible_streams" title="baselayer.app.models.User.accessible_streams"><code class="xref py py-obj docutils literal notranslate"><span class="pre">accessible_streams</span></code></a></dt><dd><p>Return the list of Streams a User or Token has access to.</p>
</dd>
<dt><strong>acls</strong></dt><dd><p>ACLs granted to user, separate from role-level ACLs</p>
</dd>
<dt><strong>affiliations</strong></dt><dd><p>The User’s affiliations (ex: Department of Mathematics, University X)</p>
</dd>
<dt><strong>annotations</strong></dt><dd></dd>
<dt><strong>annotations_on_spectra</strong></dt><dd></dd>
<dt><strong>assignments</strong></dt><dd><p>Objs the User has assigned to ObservingRuns.</p>
</dd>
<dt><strong>catalog_queries</strong></dt><dd><p>The catalog queries this User has made.</p>
</dd>
<dt><strong>comments</strong></dt><dd></dd>
<dt><strong>comments_on_earthquakes</strong></dt><dd></dd>
<dt><strong>comments_on_gcns</strong></dt><dd></dd>
<dt><strong>comments_on_shifts</strong></dt><dd></dd>
<dt><strong>comments_on_spectra</strong></dt><dd></dd>
<dt><strong>contact_email</strong></dt><dd><p>The phone number at which the user prefers to receive communications.</p>
</dd>
<dt><strong>contact_phone</strong></dt><dd><p>The email at which the user prefers to receive communications.</p>
</dd>
<dt><strong>created_at</strong></dt><dd><p>UTC time of insertion of object’s row into the database.</p>
</dd>
<dt><strong>default_observationplan_requests</strong></dt><dd><p>The default observation plan requests this User has made.</p>
</dd>
<dt><strong>earthquakeevents</strong></dt><dd><p>The EarthquakeEvents saved by this user</p>
</dd>
<dt><strong>earthquakenotices</strong></dt><dd><p>The EarthquakeNotices saved by this user</p>
</dd>
<dt><strong>expiration_date</strong></dt><dd><p>The date until which the user’s account is valid. Users are set to view-only upon expiration.</p>
</dd>
<dt><strong>first_name</strong></dt><dd><p>The User’s first name.</p>
</dd>
<dt><strong>followup_requests</strong></dt><dd><p>The follow-up requests this User has made.</p>
</dd>
<dt><strong>gcnevents</strong></dt><dd><p>The gcnevents saved by this user</p>
</dd>
<dt><strong>gcnnotices</strong></dt><dd><p>The GcnNotices saved by this user</p>
</dd>
<dt><strong>gcnproperties</strong></dt><dd><p>The gcnproperties saved by this user</p>
</dd>
<dt><strong>gcntags</strong></dt><dd><p>The gcntags saved by this user</p>
</dd>
<dt><a class="reference internal" href="#baselayer.app.models.User.gravatar_url" title="baselayer.app.models.User.gravatar_url"><code class="xref py py-obj docutils literal notranslate"><span class="pre">gravatar_url</span></code></a></dt><dd><p>The Gravatar URL inferred from the user’s contact email, or, if the contact email is null, the username.</p>
</dd>
<dt><strong>group_admission_requests</strong></dt><dd><p>User’s requests to join groups.</p>
</dd>
<dt><strong>groups</strong></dt><dd><p>The Groups this User is a member of.</p>
</dd>
<dt><strong>id</strong></dt><dd><p>Unique object identifier.</p>
</dd>
<dt><strong>is_admin</strong></dt><dd></dd>
<dt><strong>is_system_admin</strong></dt><dd></dd>
<dt><strong>last_name</strong></dt><dd><p>The User’s last name.</p>
</dd>
<dt><strong>listings</strong></dt><dd><p>The listings saved by this user</p>
</dd>
<dt><strong>localizations</strong></dt><dd><p>The localizations saved by this user</p>
</dd>
<dt><strong>mmadetector_spectra</strong></dt><dd><p>MMADetectorSpectra uploaded by this User.</p>
</dd>
<dt><strong>mmadetector_time_intervals</strong></dt><dd><p>MMADetectorTimeInterval uploaded by this User.</p>
</dd>
<dt><strong>modified</strong></dt><dd><p>UTC time the object’s row was last modified in the database.</p>
</dd>
<dt><strong>notifications</strong></dt><dd><p>Notifications to be displayed on front-end associated with User</p>
</dd>
<dt><strong>oauth_uid</strong></dt><dd><p>The user’s OAuth UID.</p>
</dd>
<dt><strong>observationplan_requests</strong></dt><dd><p>The observation plan requests this User has made.</p>
</dd>
<dt><strong>observing_runs</strong></dt><dd><p>Observing Runs this User has created.</p>
</dd>
<dt><a class="reference internal" href="#baselayer.app.models.User.permissions" title="baselayer.app.models.User.permissions"><code class="xref py py-obj docutils literal notranslate"><span class="pre">permissions</span></code></a></dt><dd><p>List of the names of all of the user’s ACLs (role-level + individual).</p>
</dd>
<dt><strong>photometric_series</strong></dt><dd><p>PhotometricSeries uploaded by this User.</p>
</dd>
<dt><strong>photometry</strong></dt><dd><p>Photometry uploaded by this User.</p>
</dd>
<dt><strong>preferences</strong></dt><dd><p>The user’s application settings.</p>
</dd>
<dt><strong>reminders</strong></dt><dd></dd>
<dt><strong>reminders_on_earthquakes</strong></dt><dd></dd>
<dt><strong>reminders_on_gcns</strong></dt><dd></dd>
<dt><strong>reminders_on_shifts</strong></dt><dd></dd>
<dt><strong>reminders_on_spectra</strong></dt><dd></dd>
<dt><strong>roles</strong></dt><dd><p>The roles assumed by this user.</p>
</dd>
<dt><strong>saved_sources</strong></dt><dd></dd>
<dt><strong>shifts</strong></dt><dd><p>The Shifts this User is a member of.</p>
</dd>
<dt><strong>single_user_group</strong></dt><dd></dd>
<dt><strong>source_notifications</strong></dt><dd><p>Source notifications the User has sent out.</p>
</dd>
<dt><strong>sources</strong></dt><dd><p>The Sources accessible to this User.</p>
</dd>
<dt><strong>spectra</strong></dt><dd><p>Spectra uploaded by this User.</p>
</dd>
<dt><strong>streams</strong></dt><dd><p>The Streams this User has access to.</p>
</dd>
<dt><strong>survey_efficiency_for_observation_plan</strong></dt><dd><p>The survey efficiency analyses on ObservationPlans this User has made.</p>
</dd>
<dt><strong>survey_efficiency_for_observations</strong></dt><dd><p>The survey efficiency analyses on Observations this User has made.</p>
</dd>
<dt><strong>tokens</strong></dt><dd><p>This user’s tokens.</p>
</dd>
<dt><strong>transaction_requests</strong></dt><dd><p>The FacilityTransactionRequests initiated by this User.</p>
</dd>
<dt><strong>transactions</strong></dt><dd><p>The FacilityTransactions initiated by this User.</p>
</dd>
<dt><strong>username</strong></dt><dd><p>The user’s username.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Methods</p>
<table class="autosummary longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">create_or_get</span></code>(id)</p></td>
<td><p>Return a new <cite>cls</cite> if an instance with the specified primary key does not exist, else return the existing instance.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get</span></code>(id_or_list, user_or_token[, mode, ...])</p></td>
<td><p>Return a database record if it is accessible to the specified User or Token.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_all</span></code>(user_or_token[, mode, options, columns])</p></td>
<td><p>Retrieve all database records accessible by the specified User or token.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_if_accessible_by</span></code>(cls_id, user_or_token)</p></td>
<td><p>Return a database record if it is accessible to the specified User or Token.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_if_readable_by</span></code>(ident, user_or_token[, ...])</p></td>
<td><p>Return an object from the database if the requesting User or Token has access to read the object.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_records_accessible_by</span></code>(user_or_token[, ...])</p></td>
<td><p>Retrieve all database records accessible by the specified User or token.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">is_accessible_by</span></code>(user_or_token[, mode])</p></td>
<td><p>Check if a User or Token has a specified type of access to this database record.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#baselayer.app.models.User.is_active" title="baselayer.app.models.User.is_active"><code class="xref py py-obj docutils literal notranslate"><span class="pre">is_active</span></code></a>()</p></td>
<td><p>Boolean flag indicating whether the User is currently active.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#baselayer.app.models.User.is_authenticated" title="baselayer.app.models.User.is_authenticated"><code class="xref py py-obj docutils literal notranslate"><span class="pre">is_authenticated</span></code></a>()</p></td>
<td><p>Boolean flag indicating whether the User is currently authenticated.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">is_readable_by</span></code>(user_or_token)</p></td>
<td><p>Return a boolean indicating whether a User or Token has read access to this object.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">query_records_accessible_by</span></code>(user_or_token[, ...])</p></td>
<td><p>Return the query for all database records accessible by the specified User or token.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">select</span></code>(user_or_token[, mode, options, columns])</p></td>
<td><p>Return the select statement for all database records accessible by the specified User or token.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#baselayer.app.models.User.user_model" title="baselayer.app.models.User.user_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">user_model</span></code></a>()</p></td>
<td><p>The base model for User subclasses.</p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default">
<colgroup>
<col style="width: 52%" />
<col style="width: 48%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>to_dict</strong></p></td>
<td></td>
</tr>
</tbody>
</table>
<dl class="py property">
<dt class="sig sig-object py" id="baselayer.app.models.User.accessible_groups">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">accessible_groups</span></span><a class="headerlink" href="#baselayer.app.models.User.accessible_groups" title="Permalink to this definition"></a></dt>
<dd><p>Return the list of Groups a User or Token has access to. For non-admin
Users or Token owners, this corresponds to the Groups they are a member of.
For System Admins, this corresponds to all Groups.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="baselayer.app.models.User.accessible_streams">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">accessible_streams</span></span><a class="headerlink" href="#baselayer.app.models.User.accessible_streams" title="Permalink to this definition"></a></dt>
<dd><p>Return the list of Streams a User or Token has access to.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.User.acls">
<span class="sig-name descname"><span class="pre">acls</span></span><a class="headerlink" href="#baselayer.app.models.User.acls" title="Permalink to this definition"></a></dt>
<dd><p>ACLs granted to user, separate from role-level ACLs</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.User.affiliations">
<span class="sig-name descname"><span class="pre">affiliations</span></span><a class="headerlink" href="#baselayer.app.models.User.affiliations" title="Permalink to this definition"></a></dt>
<dd><p>The User’s affiliations (ex: Department of Mathematics, University X)</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.User.assignments">
<span class="sig-name descname"><span class="pre">assignments</span></span><a class="headerlink" href="#baselayer.app.models.User.assignments" title="Permalink to this definition"></a></dt>
<dd><p>Objs the User has assigned to ObservingRuns.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.User.catalog_queries">
<span class="sig-name descname"><span class="pre">catalog_queries</span></span><a class="headerlink" href="#baselayer.app.models.User.catalog_queries" title="Permalink to this definition"></a></dt>
<dd><p>The catalog queries this User has made.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.User.contact_email">
<span class="sig-name descname"><span class="pre">contact_email</span></span><a class="headerlink" href="#baselayer.app.models.User.contact_email" title="Permalink to this definition"></a></dt>
<dd><p>The phone number at which the user prefers to receive communications.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.User.contact_phone">
<span class="sig-name descname"><span class="pre">contact_phone</span></span><a class="headerlink" href="#baselayer.app.models.User.contact_phone" title="Permalink to this definition"></a></dt>
<dd><p>The email at which the user prefers to receive communications.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.User.created_at">
<span class="sig-name descname"><span class="pre">created_at</span></span><a class="headerlink" href="#baselayer.app.models.User.created_at" title="Permalink to this definition"></a></dt>
<dd><p>UTC time of insertion of object’s row into the database.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.User.default_observationplan_requests">
<span class="sig-name descname"><span class="pre">default_observationplan_requests</span></span><a class="headerlink" href="#baselayer.app.models.User.default_observationplan_requests" title="Permalink to this definition"></a></dt>
<dd><p>The default observation plan requests this User has made.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.User.delete">
<span class="sig-name descname"><span class="pre">delete</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;baselayer.app.models.CustomUserAccessControl</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#baselayer.app.models.User.delete" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.User.earthquakeevents">
<span class="sig-name descname"><span class="pre">earthquakeevents</span></span><a class="headerlink" href="#baselayer.app.models.User.earthquakeevents" title="Permalink to this definition"></a></dt>
<dd><p>The EarthquakeEvents saved by this user</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.User.earthquakenotices">
<span class="sig-name descname"><span class="pre">earthquakenotices</span></span><a class="headerlink" href="#baselayer.app.models.User.earthquakenotices" title="Permalink to this definition"></a></dt>
<dd><p>The EarthquakeNotices saved by this user</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.User.expiration_date">
<span class="sig-name descname"><span class="pre">expiration_date</span></span><a class="headerlink" href="#baselayer.app.models.User.expiration_date" title="Permalink to this definition"></a></dt>
<dd><p>The date until which the user’s account is valid. Users are set to view-only upon expiration.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.User.first_name">
<span class="sig-name descname"><span class="pre">first_name</span></span><a class="headerlink" href="#baselayer.app.models.User.first_name" title="Permalink to this definition"></a></dt>
<dd><p>The User’s first name.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.User.followup_requests">
<span class="sig-name descname"><span class="pre">followup_requests</span></span><a class="headerlink" href="#baselayer.app.models.User.followup_requests" title="Permalink to this definition"></a></dt>
<dd><p>The follow-up requests this User has made.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.User.gcnevents">
<span class="sig-name descname"><span class="pre">gcnevents</span></span><a class="headerlink" href="#baselayer.app.models.User.gcnevents" title="Permalink to this definition"></a></dt>
<dd><p>The gcnevents saved by this user</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.User.gcnnotices">
<span class="sig-name descname"><span class="pre">gcnnotices</span></span><a class="headerlink" href="#baselayer.app.models.User.gcnnotices" title="Permalink to this definition"></a></dt>
<dd><p>The GcnNotices saved by this user</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.User.gcnproperties">
<span class="sig-name descname"><span class="pre">gcnproperties</span></span><a class="headerlink" href="#baselayer.app.models.User.gcnproperties" title="Permalink to this definition"></a></dt>
<dd><p>The gcnproperties saved by this user</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.User.gcntags">
<span class="sig-name descname"><span class="pre">gcntags</span></span><a class="headerlink" href="#baselayer.app.models.User.gcntags" title="Permalink to this definition"></a></dt>
<dd><p>The gcntags saved by this user</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="baselayer.app.models.User.gravatar_url">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">gravatar_url</span></span><a class="headerlink" href="#baselayer.app.models.User.gravatar_url" title="Permalink to this definition"></a></dt>
<dd><p>The Gravatar URL inferred from the user’s contact email, or, if the
contact email is null, the username.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.User.group_admission_requests">
<span class="sig-name descname"><span class="pre">group_admission_requests</span></span><a class="headerlink" href="#baselayer.app.models.User.group_admission_requests" title="Permalink to this definition"></a></dt>
<dd><p>User’s requests to join groups.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.User.groups">
<span class="sig-name descname"><span class="pre">groups</span></span><a class="headerlink" href="#baselayer.app.models.User.groups" title="Permalink to this definition"></a></dt>
<dd><p>The Groups this User is a member of.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.User.id">
<span class="sig-name descname"><span class="pre">id</span></span><a class="headerlink" href="#baselayer.app.models.User.id" title="Permalink to this definition"></a></dt>
<dd><p>Unique object identifier.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="baselayer.app.models.User.is_active">
<span class="sig-name descname"><span class="pre">is_active</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#baselayer.app.models.User.is_active" title="Permalink to this definition"></a></dt>
<dd><p>Boolean flag indicating whether the User is currently active.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="baselayer.app.models.User.is_authenticated">
<span class="sig-name descname"><span class="pre">is_authenticated</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#baselayer.app.models.User.is_authenticated" title="Permalink to this definition"></a></dt>
<dd><p>Boolean flag indicating whether the User is currently
authenticated.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.User.last_name">
<span class="sig-name descname"><span class="pre">last_name</span></span><a class="headerlink" href="#baselayer.app.models.User.last_name" title="Permalink to this definition"></a></dt>
<dd><p>The User’s last name.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.User.listings">
<span class="sig-name descname"><span class="pre">listings</span></span><a class="headerlink" href="#baselayer.app.models.User.listings" title="Permalink to this definition"></a></dt>
<dd><p>The listings saved by this user</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.User.localizations">
<span class="sig-name descname"><span class="pre">localizations</span></span><a class="headerlink" href="#baselayer.app.models.User.localizations" title="Permalink to this definition"></a></dt>
<dd><p>The localizations saved by this user</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.User.mmadetector_spectra">
<span class="sig-name descname"><span class="pre">mmadetector_spectra</span></span><a class="headerlink" href="#baselayer.app.models.User.mmadetector_spectra" title="Permalink to this definition"></a></dt>
<dd><p>MMADetectorSpectra uploaded by this User.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.User.mmadetector_time_intervals">
<span class="sig-name descname"><span class="pre">mmadetector_time_intervals</span></span><a class="headerlink" href="#baselayer.app.models.User.mmadetector_time_intervals" title="Permalink to this definition"></a></dt>
<dd><p>MMADetectorTimeInterval uploaded by this User.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.User.modified">
<span class="sig-name descname"><span class="pre">modified</span></span><a class="headerlink" href="#baselayer.app.models.User.modified" title="Permalink to this definition"></a></dt>
<dd><p>UTC time the object’s row was last modified in the database.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.User.notifications">
<span class="sig-name descname"><span class="pre">notifications</span></span><a class="headerlink" href="#baselayer.app.models.User.notifications" title="Permalink to this definition"></a></dt>
<dd><p>Notifications to be displayed on front-end associated with User</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.User.oauth_uid">
<span class="sig-name descname"><span class="pre">oauth_uid</span></span><a class="headerlink" href="#baselayer.app.models.User.oauth_uid" title="Permalink to this definition"></a></dt>
<dd><p>The user’s OAuth UID.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.User.observationplan_requests">
<span class="sig-name descname"><span class="pre">observationplan_requests</span></span><a class="headerlink" href="#baselayer.app.models.User.observationplan_requests" title="Permalink to this definition"></a></dt>
<dd><p>The observation plan requests this User has made.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.User.observing_runs">
<span class="sig-name descname"><span class="pre">observing_runs</span></span><a class="headerlink" href="#baselayer.app.models.User.observing_runs" title="Permalink to this definition"></a></dt>
<dd><p>Observing Runs this User has created.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="baselayer.app.models.User.permissions">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">permissions</span></span><a class="headerlink" href="#baselayer.app.models.User.permissions" title="Permalink to this definition"></a></dt>
<dd><p>List of the names of all of the user’s ACLs (role-level + individual).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.User.photometric_series">
<span class="sig-name descname"><span class="pre">photometric_series</span></span><a class="headerlink" href="#baselayer.app.models.User.photometric_series" title="Permalink to this definition"></a></dt>
<dd><p>PhotometricSeries uploaded by this User.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.User.photometry">
<span class="sig-name descname"><span class="pre">photometry</span></span><a class="headerlink" href="#baselayer.app.models.User.photometry" title="Permalink to this definition"></a></dt>
<dd><p>Photometry uploaded by this User.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.User.preferences">
<span class="sig-name descname"><span class="pre">preferences</span></span><a class="headerlink" href="#baselayer.app.models.User.preferences" title="Permalink to this definition"></a></dt>
<dd><p>The user’s application settings.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.User.roles">
<span class="sig-name descname"><span class="pre">roles</span></span><a class="headerlink" href="#baselayer.app.models.User.roles" title="Permalink to this definition"></a></dt>
<dd><p>The roles assumed by this user.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.User.shifts">
<span class="sig-name descname"><span class="pre">shifts</span></span><a class="headerlink" href="#baselayer.app.models.User.shifts" title="Permalink to this definition"></a></dt>
<dd><p>The Shifts this User is a member of.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.User.source_notifications">
<span class="sig-name descname"><span class="pre">source_notifications</span></span><a class="headerlink" href="#baselayer.app.models.User.source_notifications" title="Permalink to this definition"></a></dt>
<dd><p>Source notifications the User has sent out.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.User.sources">
<span class="sig-name descname"><span class="pre">sources</span></span><a class="headerlink" href="#baselayer.app.models.User.sources" title="Permalink to this definition"></a></dt>
<dd><p>The Sources accessible to this User.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.User.spectra">
<span class="sig-name descname"><span class="pre">spectra</span></span><a class="headerlink" href="#baselayer.app.models.User.spectra" title="Permalink to this definition"></a></dt>
<dd><p>Spectra uploaded by this User.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.User.streams">
<span class="sig-name descname"><span class="pre">streams</span></span><a class="headerlink" href="#baselayer.app.models.User.streams" title="Permalink to this definition"></a></dt>
<dd><p>The Streams this User has access to.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.User.survey_efficiency_for_observation_plan">
<span class="sig-name descname"><span class="pre">survey_efficiency_for_observation_plan</span></span><a class="headerlink" href="#baselayer.app.models.User.survey_efficiency_for_observation_plan" title="Permalink to this definition"></a></dt>
<dd><p>The survey efficiency analyses on ObservationPlans this User has made.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.User.survey_efficiency_for_observations">
<span class="sig-name descname"><span class="pre">survey_efficiency_for_observations</span></span><a class="headerlink" href="#baselayer.app.models.User.survey_efficiency_for_observations" title="Permalink to this definition"></a></dt>
<dd><p>The survey efficiency analyses on Observations this User has made.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="baselayer.app.models.User.to_dict">
<span class="sig-name descname"><span class="pre">to_dict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#baselayer.app.models.User.to_dict" title="Permalink to this definition"></a></dt>
<dd><p>Serialize this object to a Python dictionary.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.User.tokens">
<span class="sig-name descname"><span class="pre">tokens</span></span><a class="headerlink" href="#baselayer.app.models.User.tokens" title="Permalink to this definition"></a></dt>
<dd><p>This user’s tokens.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.User.transaction_requests">
<span class="sig-name descname"><span class="pre">transaction_requests</span></span><a class="headerlink" href="#baselayer.app.models.User.transaction_requests" title="Permalink to this definition"></a></dt>
<dd><p>The FacilityTransactionRequests initiated by this User.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.User.transactions">
<span class="sig-name descname"><span class="pre">transactions</span></span><a class="headerlink" href="#baselayer.app.models.User.transactions" title="Permalink to this definition"></a></dt>
<dd><p>The FacilityTransactions initiated by this User.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.User.update">
<span class="sig-name descname"><span class="pre">update</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;baselayer.app.models.CustomUserAccessControl</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#baselayer.app.models.User.update" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="baselayer.app.models.User.user_model">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">user_model</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#baselayer.app.models.User.user_model" title="Permalink to this definition"></a></dt>
<dd><p>The base model for User subclasses.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.User.username">
<span class="sig-name descname"><span class="pre">username</span></span><a class="headerlink" href="#baselayer.app.models.User.username" title="Permalink to this definition"></a></dt>
<dd><p>The user’s username.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="baselayer.app.models.UserACL">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">baselayer.app.models.</span></span><span class="sig-name descname"><span class="pre">UserACL</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#baselayer.app.models.UserACL" title="Permalink to this definition"></a></dt>
<dd><p>Join table mapping Users to ACLs</p>
<dl class="field-list simple">
<dt class="field-odd">Attributes</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>acl</strong></dt><dd></dd>
<dt><strong>acl_id</strong></dt><dd></dd>
<dt><strong>created_at</strong></dt><dd><p>UTC time of insertion of object’s row into the database.</p>
</dd>
<dt><strong>id</strong></dt><dd><p>Unique object identifier.</p>
</dd>
<dt><strong>modified</strong></dt><dd><p>UTC time the object’s row was last modified in the database.</p>
</dd>
<dt><strong>user</strong></dt><dd></dd>
<dt><strong>user_id</strong></dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">Methods</p>
<table class="autosummary longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">create_or_get</span></code>(id)</p></td>
<td><p>Return a new <cite>cls</cite> if an instance with the specified primary key does not exist, else return the existing instance.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get</span></code>(id_or_list, user_or_token[, mode, ...])</p></td>
<td><p>Return a database record if it is accessible to the specified User or Token.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_all</span></code>(user_or_token[, mode, options, columns])</p></td>
<td><p>Retrieve all database records accessible by the specified User or token.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_if_accessible_by</span></code>(cls_id, user_or_token)</p></td>
<td><p>Return a database record if it is accessible to the specified User or Token.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_if_readable_by</span></code>(ident, user_or_token[, ...])</p></td>
<td><p>Return an object from the database if the requesting User or Token has access to read the object.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_records_accessible_by</span></code>(user_or_token[, ...])</p></td>
<td><p>Retrieve all database records accessible by the specified User or token.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">is_accessible_by</span></code>(user_or_token[, mode])</p></td>
<td><p>Check if a User or Token has a specified type of access to this database record.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">is_readable_by</span></code>(user_or_token)</p></td>
<td><p>Return a boolean indicating whether a User or Token has read access to this object.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">query_records_accessible_by</span></code>(user_or_token[, ...])</p></td>
<td><p>Return the query for all database records accessible by the specified User or token.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">select</span></code>(user_or_token[, mode, options, columns])</p></td>
<td><p>Return the select statement for all database records accessible by the specified User or token.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_dict</span></code>()</p></td>
<td><p>Serialize this object to a Python dictionary.</p></td>
</tr>
</tbody>
</table>
<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.UserACL.create">
<span class="sig-name descname"><span class="pre">create</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;baselayer.app.models.AccessibleIfRelatedRowsAreAccessible</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#baselayer.app.models.UserACL.create" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.UserACL.created_at">
<span class="sig-name descname"><span class="pre">created_at</span></span><a class="headerlink" href="#baselayer.app.models.UserACL.created_at" title="Permalink to this definition"></a></dt>
<dd><p>UTC time of insertion of object’s row into the database.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.UserACL.id">
<span class="sig-name descname"><span class="pre">id</span></span><a class="headerlink" href="#baselayer.app.models.UserACL.id" title="Permalink to this definition"></a></dt>
<dd><p>Unique object identifier.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.UserACL.modified">
<span class="sig-name descname"><span class="pre">modified</span></span><a class="headerlink" href="#baselayer.app.models.UserACL.modified" title="Permalink to this definition"></a></dt>
<dd><p>UTC time the object’s row was last modified in the database.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.UserACL.read">
<span class="sig-name descname"><span class="pre">read</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;baselayer.app.models.AccessibleIfRelatedRowsAreAccessible</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#baselayer.app.models.UserACL.read" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="baselayer.app.models.UserAccessControl">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">baselayer.app.models.</span></span><span class="sig-name descname"><span class="pre">UserAccessControl</span></span><a class="headerlink" href="#baselayer.app.models.UserAccessControl" title="Permalink to this definition"></a></dt>
<dd><p>Logic for controlling user access to database records. Mapped classes
can set their create, read, update, or delete attributes to subclasses of
this class to ensure they are only accessed by users or tokens with the
requisite permissions.</p>
<p class="rubric">Methods</p>
<table class="autosummary longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#baselayer.app.models.UserAccessControl.check_cls_for_attributes" title="baselayer.app.models.UserAccessControl.check_cls_for_attributes"><code class="xref py py-obj docutils literal notranslate"><span class="pre">check_cls_for_attributes</span></code></a>(cls, attrs)</p></td>
<td><p>Check that a target class has the specified attributes.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#baselayer.app.models.UserAccessControl.query_accessible_rows" title="baselayer.app.models.UserAccessControl.query_accessible_rows"><code class="xref py py-obj docutils literal notranslate"><span class="pre">query_accessible_rows</span></code></a>(cls, user_or_token[, ...])</p></td>
<td><p>Construct a Query object that, when executed, returns the rows of a specified table that are accessible to a specified user or token.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#baselayer.app.models.UserAccessControl.select_accessible_rows" title="baselayer.app.models.UserAccessControl.select_accessible_rows"><code class="xref py py-obj docutils literal notranslate"><span class="pre">select_accessible_rows</span></code></a>(cls, user_or_token[, ...])</p></td>
<td><p>Construct a Select object that, when executed, returns the rows of a specified table that are accessible to a specified user or token.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#baselayer.app.models.UserAccessControl.user_id_from_user_or_token" title="baselayer.app.models.UserAccessControl.user_id_from_user_or_token"><code class="xref py py-obj docutils literal notranslate"><span class="pre">user_id_from_user_or_token</span></code></a>(user_or_token)</p></td>
<td><p>Return the user_id associated with a specified User or Token object.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt class="sig sig-object py" id="baselayer.app.models.UserAccessControl.check_cls_for_attributes">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">check_cls_for_attributes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cls</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attrs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#baselayer.app.models.UserAccessControl.check_cls_for_attributes" title="Permalink to this definition"></a></dt>
<dd><p>Check that a target class has the specified attributes. If not,
raise a TypeError.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>cls</strong><span class="classifier"><cite>baselayer.app.models.DeclarativeMeta</cite></span></dt><dd><p>The class to check.</p>
</dd>
<dt><strong>attrs</strong><span class="classifier">list of str</span></dt><dd><p>The names of the attributes to check for.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="baselayer.app.models.UserAccessControl.query_accessible_rows">
<span class="sig-name descname"><span class="pre">query_accessible_rows</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cls</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_or_token</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#baselayer.app.models.UserAccessControl.query_accessible_rows" title="Permalink to this definition"></a></dt>
<dd><p>Construct a Query object that, when executed, returns the rows of a
specified table that are accessible to a specified user or token.
All query based functions will be deprecated when moving to
SQL Alchemy 2.0 in favor of select functions.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>cls</strong><span class="classifier"><cite>baselayer.app.models.DeclarativeMeta</cite></span></dt><dd><p>The mapped class of the target table.</p>
</dd>
<dt><strong>user_or_token</strong><span class="classifier"><cite>baselayer.app.models.User</cite> or <cite>baselayer.app.models.Token</cite></span></dt><dd><p>The User or Token to check.</p>
</dd>
<dt><strong>columns</strong><span class="classifier">list of sqlalchemy.Column, optional, default None</span></dt><dd><p>The columns to retrieve from the target table. If None, queries
the mapped class directly and returns mapped instances.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>query</strong><span class="classifier">sqlalchemy.Query</span></dt><dd><p>Query for the accessible rows.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="baselayer.app.models.UserAccessControl.select_accessible_rows">
<span class="sig-name descname"><span class="pre">select_accessible_rows</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cls</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_or_token</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#baselayer.app.models.UserAccessControl.select_accessible_rows" title="Permalink to this definition"></a></dt>
<dd><p>Construct a Select object that, when executed, returns the rows of a
specified table that are accessible to a specified user or token.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>cls</strong><span class="classifier"><cite>baselayer.app.models.DeclarativeMeta</cite></span></dt><dd><p>The mapped class of the target table.</p>
</dd>
<dt><strong>user_or_token</strong><span class="classifier"><cite>baselayer.app.models.User</cite> or <cite>baselayer.app.models.Token</cite></span></dt><dd><p>The User or Token to check.</p>
</dd>
<dt><strong>columns</strong><span class="classifier">list of sqlalchemy.Column, optional, default None</span></dt><dd><p>The columns to retrieve from the target table. If None, queries
the mapped class directly and returns mapped instances.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>sqlalchemy select object</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="baselayer.app.models.UserAccessControl.user_id_from_user_or_token">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">user_id_from_user_or_token</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">user_or_token</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#baselayer.app.models.UserAccessControl.user_id_from_user_or_token" title="Permalink to this definition"></a></dt>
<dd><p>Return the user_id associated with a specified User or Token object.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>user_or_token</strong><span class="classifier"><cite>baselayer.app.models.User</cite> or <cite>baselayer.app.models.Token</cite></span></dt><dd><p>The User or Token to check.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>user_id: int</dt><dd><p>The user_id associated with the User or Token object.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="baselayer.app.models.UserRole">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">baselayer.app.models.</span></span><span class="sig-name descname"><span class="pre">UserRole</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#baselayer.app.models.UserRole" title="Permalink to this definition"></a></dt>
<dd><p>Join table mapping Users to Roles.</p>
<dl class="field-list simple">
<dt class="field-odd">Attributes</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>created_at</strong></dt><dd><p>UTC time of insertion of object’s row into the database.</p>
</dd>
<dt><strong>id</strong></dt><dd><p>Unique object identifier.</p>
</dd>
<dt><strong>modified</strong></dt><dd><p>UTC time the object’s row was last modified in the database.</p>
</dd>
<dt><strong>role</strong></dt><dd></dd>
<dt><strong>role_id</strong></dt><dd></dd>
<dt><strong>user</strong></dt><dd></dd>
<dt><strong>user_id</strong></dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">Methods</p>
<table class="autosummary longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">create_or_get</span></code>(id)</p></td>
<td><p>Return a new <cite>cls</cite> if an instance with the specified primary key does not exist, else return the existing instance.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get</span></code>(id_or_list, user_or_token[, mode, ...])</p></td>
<td><p>Return a database record if it is accessible to the specified User or Token.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_all</span></code>(user_or_token[, mode, options, columns])</p></td>
<td><p>Retrieve all database records accessible by the specified User or token.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_if_accessible_by</span></code>(cls_id, user_or_token)</p></td>
<td><p>Return a database record if it is accessible to the specified User or Token.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_if_readable_by</span></code>(ident, user_or_token[, ...])</p></td>
<td><p>Return an object from the database if the requesting User or Token has access to read the object.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_records_accessible_by</span></code>(user_or_token[, ...])</p></td>
<td><p>Retrieve all database records accessible by the specified User or token.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">is_accessible_by</span></code>(user_or_token[, mode])</p></td>
<td><p>Check if a User or Token has a specified type of access to this database record.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">is_readable_by</span></code>(user_or_token)</p></td>
<td><p>Return a boolean indicating whether a User or Token has read access to this object.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">query_records_accessible_by</span></code>(user_or_token[, ...])</p></td>
<td><p>Return the query for all database records accessible by the specified User or token.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">select</span></code>(user_or_token[, mode, options, columns])</p></td>
<td><p>Return the select statement for all database records accessible by the specified User or token.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_dict</span></code>()</p></td>
<td><p>Serialize this object to a Python dictionary.</p></td>
</tr>
</tbody>
</table>
<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.UserRole.create">
<span class="sig-name descname"><span class="pre">create</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;baselayer.app.models.AccessibleIfRelatedRowsAreAccessible</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#baselayer.app.models.UserRole.create" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.UserRole.created_at">
<span class="sig-name descname"><span class="pre">created_at</span></span><a class="headerlink" href="#baselayer.app.models.UserRole.created_at" title="Permalink to this definition"></a></dt>
<dd><p>UTC time of insertion of object’s row into the database.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.UserRole.id">
<span class="sig-name descname"><span class="pre">id</span></span><a class="headerlink" href="#baselayer.app.models.UserRole.id" title="Permalink to this definition"></a></dt>
<dd><p>Unique object identifier.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.UserRole.modified">
<span class="sig-name descname"><span class="pre">modified</span></span><a class="headerlink" href="#baselayer.app.models.UserRole.modified" title="Permalink to this definition"></a></dt>
<dd><p>UTC time the object’s row was last modified in the database.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="baselayer.app.models.UserRole.read">
<span class="sig-name descname"><span class="pre">read</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;baselayer.app.models.AccessibleIfRelatedRowsAreAccessible</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#baselayer.app.models.UserRole.read" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="baselayer.app.models.bulk_verify">
<span class="sig-prename descclassname"><span class="pre">baselayer.app.models.</span></span><span class="sig-name descname"><span class="pre">bulk_verify</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mode</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">accessor</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#baselayer.app.models.bulk_verify" title="Permalink to this definition"></a></dt>
<dd><p>Vectorized permission check for a heterogeneous set of records. If an
access leak is detected, it will be handled according to the <cite>security</cite>
section of the application’s configuration.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>mode</strong><span class="classifier">str</span></dt><dd><p>The access mode to check. Can be create, read, update, or delete.</p>
</dd>
<dt><strong>collection</strong><span class="classifier">collection of <cite>baselayer.app.models.Base</cite>.</span></dt><dd><p>The records to check. These records will be grouped by type, and
a single database query will be issued to check access for each
record type.</p>
</dd>
<dt><strong>accessor</strong><span class="classifier">baselayer.app.models.User or baselayer.app.models.Token</span></dt><dd><p>The user or token to check.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="baselayer.app.models.init_db">
<span class="sig-prename descclassname"><span class="pre">baselayer.app.models.</span></span><span class="sig-name descname"><span class="pre">init_db</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">user</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">database</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">password</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">autoflush</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">engine_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#baselayer.app.models.init_db" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>engine_args</strong><span class="classifier">dict</span></dt><dd><ul>
<li><p><cite>pool_size</cite>:
The number of connections maintained to the DB. Default 5.</p></li>
<li><p><cite>max_overflow</cite>:
The number of additional connections that will be made as needed.</p>
<blockquote>
<div><p>Once these extra connections have been used, they are discarded.</p>
</div></blockquote>
<p>Default 10.</p>
</li>
<li><dl class="simple">
<dt><cite>pool_recycle</cite>:</dt><dd><p>Prevent the pool from using any connection that is older than this
(specified in seconds).
Default 3600.</p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="baselayer.app.models.join_model">
<span class="sig-prename descclassname"><span class="pre">baselayer.app.models.</span></span><span class="sig-name descname"><span class="pre">join_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">join_table</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">column_1=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">column_2=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fk_1='id'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fk_2='id'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base=&lt;class</span> <span class="pre">'sqlalchemy.orm.decl_api.Base'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_name=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overlaps=None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#baselayer.app.models.join_model" title="Permalink to this definition"></a></dt>
<dd><p>Helper function to create a join table for a many-to-many relationship.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>join_table</strong><span class="classifier">str</span></dt><dd><p>Name of the new table to be created.</p>
</dd>
<dt><strong>model_1</strong><span class="classifier">str</span></dt><dd><p>First model in the relationship.</p>
</dd>
<dt><strong>model_2</strong><span class="classifier">str</span></dt><dd><p>Second model in the relationship.</p>
</dd>
<dt><strong>column_1</strong><span class="classifier">str, optional</span></dt><dd><p>Name of the join table column corresponding to <cite>model_1</cite>. If <cite>None</cite>,
then {<cite>table1`[:-1]_id} will be used (e.g., `user_id</cite> for <cite>users</cite>).</p>
</dd>
<dt><strong>column_2</strong><span class="classifier">str, optional</span></dt><dd><p>Name of the join table column corresponding to <cite>model_2</cite>. If <cite>None</cite>,
then {<cite>table2`[:-1]_id} will be used (e.g., `user_id</cite> for <cite>users</cite>).</p>
</dd>
<dt><strong>fk_1</strong><span class="classifier">str, optional</span></dt><dd><p>Name of the column from <cite>model_1</cite> that the foreign key should refer to.</p>
</dd>
<dt><strong>fk_2</strong><span class="classifier">str, optional</span></dt><dd><p>Name of the column from <cite>model_2</cite> that the foreign key should refer to.</p>
</dd>
<dt><strong>base</strong><span class="classifier">sqlalchemy.ext.declarative.api.DeclarativeMeta</span></dt><dd><p>SQLAlchemy model base to subclass.</p>
</dd>
<dt><strong>new_name: str, optional</strong></dt><dd><p>Name of the new model class. If <cite>None</cite>, then the name will be
model_1.__name__ + model_2.__name__.</p>
</dd>
<dt><strong>overlaps</strong><span class="classifier">str or list of str, optional</span></dt><dd><p>Each relationship defined in this model will have, by default,
overlaps=f”{table_1}, {table_2}”. If any additional overalapping
relationships or columns need to be added, they can be given as
a string or list of strings.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>sqlalchemy.ext.declarative.api.DeclarativeMeta</dt><dd><p>SQLAlchemy association model class</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>
<section id="entity-relationship-diagram">
<h2>Entity Relationship Diagram<a class="headerlink" href="#entity-relationship-diagram" title="Permalink to this heading"></a></h2>
<p>The following entity relationship diagram visualizes the structure of the
SkyPortal database.</p>
<a class="reference external image-reference" href="_images/erd.png"><img alt="Skyportal Entity Relationship Diagram" src="_images/erd.png" /></a>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="styling.html" class="btn btn-neutral float-left" title="Styling components" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="migrations.html" class="btn btn-neutral float-right" title="Database migrations" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, The SkyPortal Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>