
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Advanced usage &#8212; skyportal 1.0.0 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!-- 
    this give us a css class that will be invisible only if js is disabled 
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="_static/output_cells.css?v=4c393c42" />
  
  <!-- So that users can add custom icons -->
  <script src="_static/scripts/fontawesome.js?digest=26a4bc78f4c0ddb94549"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549" />

    <script src="_static/documentation_options.js?v=f9c1cefe"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'advanced_usage';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="How to work with photometric series" href="photometric_series.html" />
    <link rel="prev" title="Spatial Catalogs" href="spatial_catalog.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="1.0.0" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
  
    <p class="title logo__title">skyportal 1.0.0 documentation</p>
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="design.html">System Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup.html">Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev.html">Developer notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="deploy.html">Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="versioning.html">Versioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_loader.html">Data loader</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">How to Contribute</a></li>
<li class="toctree-l1"><a class="reference internal" href="adding_features.html">Adding new features</a></li>
<li class="toctree-l1"><a class="reference internal" href="adding_comments_annotation_types.html">Adding a new type of Comment or Annotation</a></li>
<li class="toctree-l1"><a class="reference internal" href="styling.html">Styling components</a></li>
<li class="toctree-l1"><a class="reference internal" href="database.html">Database Schema</a></li>
<li class="toctree-l1"><a class="reference internal" href="migrations.html">Database migrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="query_analysis.html">Analyzing database queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="permissions.html">Access controls</a></li>
<li class="toctree-l1"><a class="reference internal" href="slack.html">Slack Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="followup.html">Follow-up triggering</a></li>
<li class="toctree-l1"><a class="reference internal" href="mma.html">MMA Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="period.html">Periodic Timeseries Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="spatial_catalog.html">Spatial Catalogs</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Advanced usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="photometric_series.html">How to work with photometric series</a></li>
<li class="toctree-l1"><a class="reference internal" href="analysis.html">Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="extensions.html">SkyPortal Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="pages.html">Front-end Pages</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/advanced_usage.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Advanced usage</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#posting-color-magnitude-data-to-generate-an-hr-diagram">Posting color-magnitude data to generate an HR diagram</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#managing-taxonomies">Managing Taxonomies</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrading-the-sitewide-taxonomy">Upgrading the Sitewide Taxonomy</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#posting-a-new-taxonomy">Posting a New Taxonomy</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#note-deleting-a-taxonomy">NOTE: Deleting a Taxonomy</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#spectroscopic-lines">Spectroscopic lines</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="advanced-usage">
<h1>Advanced usage<a class="headerlink" href="#advanced-usage" title="Link to this heading">#</a></h1>
<section id="posting-color-magnitude-data-to-generate-an-hr-diagram">
<h2>Posting color-magnitude data to generate an HR diagram<a class="headerlink" href="#posting-color-magnitude-data-to-generate-an-hr-diagram" title="Link to this heading">#</a></h2>
<p>For stellar targets we are interested in showing the HR diagram
based on the color-magnitude data from a cross match to, e.g., the Gaia catalog.
Currently we support only Gaia inputs on the front-end,
but in a future release we may expand the notion of the HR diagram
to arbitrary catalogs.</p>
<p>This is done by posting an <code class="docutils literal notranslate"><span class="pre">Annotation</span></code> to the source, with correctly formatted data.
If at least one properly formatted <code class="docutils literal notranslate"><span class="pre">Annotation</span></code> with Gaia color-magnitude data
exists on the source, an HR diagram will be rendered for it.</p>
<p>First let’s see how to post an <code class="docutils literal notranslate"><span class="pre">Annotation</span></code> using the <code class="docutils literal notranslate"><span class="pre">requests</span></code> package.
Here is a working example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;http://localhost:5000&#39;</span>
<span class="n">token</span> <span class="o">=</span> <span class="s1">&#39;239868fa-8307-41ad-983f-4a8180609df6&#39;</span>
<span class="n">header</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Authorization&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;token </span><span class="si">{</span><span class="n">token</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;content_type&quot;</span><span class="p">:</span> <span class="s2">&quot;application/json&quot;</span><span class="p">}</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;obj_id&#39;</span><span class="p">:</span> <span class="s1">&#39;2021example&#39;</span><span class="p">,</span>
        <span class="s1">&#39;origin&#39;</span><span class="p">:</span> <span class="s1">&#39;cross_match_robot&#39;</span><span class="p">,</span>
        <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;Gaia&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;Mag_G&#39;</span><span class="p">,</span> <span class="mf">10.2</span><span class="p">,</span>
                <span class="s1">&#39;Mag_Bp&#39;</span><span class="p">:</span> <span class="mf">9.8</span><span class="p">,</span>
                <span class="s1">&#39;Mag_Rp&#39;</span><span class="p">:</span> <span class="mf">10.5</span><span class="p">,</span>
                <span class="s1">&#39;Plx&#39;</span><span class="p">:</span> <span class="mf">8.5</span>
               <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
      <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s1">/api/sources/2021example/annotations&#39;</span><span class="p">,</span>
      <span class="n">header</span><span class="o">=</span><span class="n">header</span><span class="p">,</span>
      <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="p">)</span>
</pre></div>
</div>
<p>Let’s look at this line by line.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">url</span></code> should point to the SkyPortal instance,
in this case running on a local machine.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">token</span></code> should be generated for your user
through the profile page.
The token must have the ACL to annotate.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">header</span></code> is used to pass along the SkyPortal authentication token.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">data</span></code> field is a dictionary that contains
information to be posted to the database.
In this case the data must be formatted
to comply with the <code class="docutils literal notranslate"><span class="pre">Annotation</span></code> API,
namely it must have a valid <code class="docutils literal notranslate"><span class="pre">obj_id</span></code>
of an existing object that is accessible to the user,
it must contain a non-empty string for the <code class="docutils literal notranslate"><span class="pre">origin</span></code>
and it should contain the annotation <code class="docutils literal notranslate"><span class="pre">data</span></code>,
that is a dictionary with arbitrary entries.</p>
<p>In general, the <code class="docutils literal notranslate"><span class="pre">origin</span></code> field is used to
enumerate the different services that would
annotate each source.
Each origin can only post a single <code class="docutils literal notranslate"><span class="pre">Annotation</span></code>
to each source, but that <code class="docutils literal notranslate"><span class="pre">Annotation</span></code> can contain arbitrary data.</p>
<p>In the case of the color-magnitude plot,
the system only recognizes annotations
with a specific schema:</p>
<ul class="simple">
<li><p>One of the keys in the annotation <code class="docutils literal notranslate"><span class="pre">data</span></code> must be named <code class="docutils literal notranslate"><span class="pre">Gaia</span></code>.</p></li>
<li><p>The value of that key must be another dictionary.</p></li>
<li><p>That dictionary must contain the following entries:</p></li>
<li><p>‘Mag_G’, ‘Mag_Bp’, ‘Mag_Rp’, ‘Plx’.</p></li>
<li><p>All these names (including the catalog name) may be made customizable
in a future release. Currently, the HR diagram is drawn only for Gaia data.</p></li>
<li><p>The names are searched ignoring case, and removing underscores.
So, for example, the dictionary can contain <code class="docutils literal notranslate"><span class="pre">mag_g</span></code> or <code class="docutils literal notranslate"><span class="pre">MagG</span></code>,
and would still be accepted as data for an HR diagram.
Please do not include multiple data keys with indistinguishable names,
i.e., both <code class="docutils literal notranslate"><span class="pre">mag_g</span></code> and <code class="docutils literal notranslate"><span class="pre">Mag_G</span></code> in the same <code class="docutils literal notranslate"><span class="pre">Annotation</span></code> as this will
cause undefined behavior.</p></li>
<li><p>The parallax (”Plx”) is given in units of milli-arcsec.</p></li>
</ul>
<p>Finally, the return value <code class="docutils literal notranslate"><span class="pre">response</span></code> from the request
should contain a <code class="docutils literal notranslate"><span class="pre">status==200</span></code> and a data dictionary
with the data that was posted.
If the posting was unsuccessful,
the status would be 400.</p>
</section>
<section id="managing-taxonomies">
<h2>Managing Taxonomies<a class="headerlink" href="#managing-taxonomies" title="Link to this heading">#</a></h2>
<p>Taxonomies are used for classification. There is typically a sitewide taxonomy that all users of SkyPortal can see. By default, we seed a new SP database with the latest taxonomy from the <a class="reference external" href="https://github.com/profjsb/timedomain-taxonomy">Time-domain Astronomy Taxonomy
(Github)</a> (<code class="docutils literal notranslate"><span class="pre">tdtax</span></code>). From time to time, the latest taxonomy may be upgraded as new subclasses of sources are discovered and SP admins may need to push a new version of the taxonomy to the live application.</p>
<section id="upgrading-the-sitewide-taxonomy">
<h3>Upgrading the Sitewide Taxonomy<a class="headerlink" href="#upgrading-the-sitewide-taxonomy" title="Link to this heading">#</a></h3>
<p>To upgrade to the latest <code class="docutils literal notranslate"><span class="pre">tdtax</span></code>, as an admin, you will need to generate a token with a “Post taxonomy” ACL. Next install the latest <code class="docutils literal notranslate"><span class="pre">tdtax</span></code> on your system:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">tdtax</span>
</pre></div>
</div>
<p>Next, in Python:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">tdtax</span>

<span class="n">tax_obj</span> <span class="o">=</span>  <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Sitewide Taxonomy&#39;</span><span class="p">,</span>
            <span class="s1">&#39;provenance&#39;</span><span class="p">:</span> <span class="s1">&#39;https://github.com/profjsb/timedomain-taxonomy&#39;</span><span class="p">,</span>
            <span class="s1">&#39;hierarchy&#39;</span><span class="p">:</span> <span class="n">tdtax</span><span class="o">.</span><span class="n">taxonomy</span><span class="p">,</span>
            <span class="s1">&#39;version&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">tdtax</span><span class="o">.</span><span class="n">__version__</span><span class="p">),</span>
<span class="p">}</span>

<span class="n">token</span> <span class="o">=</span> <span class="s2">&quot;USE-YOUR-TOKEN-HERE&quot;</span>
<span class="k">def</span> <span class="nf">api</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">endpoint</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Authorization&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;token </span><span class="si">{</span><span class="n">token</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">}</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">endpoint</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">response</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">api</span><span class="p">(</span><span class="s1">&#39;POST&#39;</span><span class="p">,</span>
               <span class="s1">&#39;URL_TO_SKYPORTAL_INSTANCE/api/taxonomy&#39;</span><span class="p">,</span>
                <span class="n">data</span><span class="o">=</span><span class="n">tax_obj</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</pre></div>
</div>
<p>You should then see something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;success&#39;</span><span class="p">,</span>
 <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;taxonomy_id&#39;</span><span class="p">:</span> <span class="mi">9</span><span class="p">},</span>
 <span class="s1">&#39;version&#39;</span><span class="p">:</span> <span class="s1">&#39;0.9.dev0+git...&#39;</span><span class="p">}</span>
</pre></div>
</div>
<p>If the <code class="docutils literal notranslate"><span class="pre">name</span></code> of the taxonomy is exactly the same as a taxonomy already in the system, this new taxonomy will supercede that taxonomy. That is, by default it will be set to be the latest version (<code class="docutils literal notranslate"><span class="pre">IsLatest</span> <span class="pre">=</span> <span class="pre">True</span></code>) and shown to end users in the dropdown menu on the Source page. Older classifications will be still associated with the <code class="docutils literal notranslate"><span class="pre">taxonomy_id</span></code> they were originally connected to.</p>
</section>
<section id="posting-a-new-taxonomy">
<h3>Posting a New Taxonomy<a class="headerlink" href="#posting-a-new-taxonomy" title="Link to this heading">#</a></h3>
<p>You may wish to post a new custom taxonomy, for example to enable classifications that are outside the scope of the sitewide taxonomy. When posting a new taxonomy, it is usually preferable to limit its availability to specific, relevant groups. In this way, you can assign your own classifications where needed without extending them across the entire site.</p>
<p>To post a new taxonomy to specific groups, follow the instructions above, but add the <code class="docutils literal notranslate"><span class="pre">group_ids</span></code> parameter (containing the array of group ids to receive the taxonomy) to <code class="docutils literal notranslate"><span class="pre">tax_obj</span></code>. Ensure your new taxonomy is in a nested JSON format.</p>
<p>Once the taxonomy is posted, users who are members of the specified groups will be able to see and use the new classifications. To add the taxonomy to another group, perform another <code class="docutils literal notranslate"><span class="pre">POST</span></code> request containing the desired group id.</p>
</section>
<section id="note-deleting-a-taxonomy">
<h3>NOTE: Deleting a Taxonomy<a class="headerlink" href="#note-deleting-a-taxonomy" title="Link to this heading">#</a></h3>
<p>In very rare cases you may wish to delete a taxonomy (e.g., if you made a typo when loading it). This should be done with extreme care: if anyone has classifications associated with that taxonomy their classifications will be lost upon delete.</p>
</section>
</section>
<section id="spectroscopic-lines">
<h2>Spectroscopic lines<a class="headerlink" href="#spectroscopic-lines" title="Link to this heading">#</a></h2>
<p>The selection of element and galaxy lines on SkyPortal were derived from the NIST atomic database (<a class="reference external" href="https://www.nist.gov/pml/atomic-spectra-database">https://www.nist.gov/pml/atomic-spectra-database</a>) , using the methods of Gal-Yam (2019) (<a class="reference external" href="https://ui.adsabs.harvard.edu/abs/2019ApJ...882..102G/abstract">https://ui.adsabs.harvard.edu/abs/2019ApJ…882..102G/abstract</a>). Telluric and Skylines were migrated from the ZTF Marshal.
Element lines and galaxy lines move according to the set redshift or expansion velocity. Tellurics and skylines remain static.</p>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="spatial_catalog.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Spatial Catalogs</p>
      </div>
    </a>
    <a class="right-next"
       href="photometric_series.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">How to work with photometric series</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#posting-color-magnitude-data-to-generate-an-hr-diagram">Posting color-magnitude data to generate an HR diagram</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#managing-taxonomies">Managing Taxonomies</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#upgrading-the-sitewide-taxonomy">Upgrading the Sitewide Taxonomy</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#posting-a-new-taxonomy">Posting a New Taxonomy</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#note-deleting-a-taxonomy">NOTE: Deleting a Taxonomy</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#spectroscopic-lines">Spectroscopic lines</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By The SkyPortal Team
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2020–2023, The SkyPortal Team.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549"></script>
<script defer src="_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>